{"C:\\Users\\salim\\3D Objects\\backend\\src\\app.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\app.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":22}},"3":{"start":{"line":10,"column":0},"end":{"line":10,"column":25}},"4":{"start":{"line":12,"column":16},"end":{"line":12,"column":67}},"5":{"start":{"line":14,"column":13},"end":{"line":14,"column":78}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":57}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":68}},"8":{"start":{"line":20,"column":12},"end":{"line":20,"column":66}},"9":{"start":{"line":22,"column":12},"end":{"line":22,"column":66}},"10":{"start":{"line":24,"column":16},"end":{"line":24,"column":74}},"11":{"start":{"line":26,"column":17},"end":{"line":26,"column":76}},"12":{"start":{"line":28,"column":24},"end":{"line":28,"column":77}},"13":{"start":{"line":30,"column":11},"end":{"line":30,"column":56}},"14":{"start":{"line":32,"column":16},"end":{"line":32,"column":71}},"15":{"start":{"line":34,"column":39},"end":{"line":34,"column":93}},"16":{"start":{"line":36,"column":15},"end":{"line":36,"column":38}},"17":{"start":{"line":37,"column":0},"end":{"line":42,"column":3}},"18":{"start":{"line":38,"column":2},"end":{"line":41,"column":5}},"19":{"start":{"line":43,"column":0},"end":{"line":43,"column":36}},"20":{"start":{"line":44,"column":0},"end":{"line":47,"column":3}},"21":{"start":{"line":45,"column":2},"end":{"line":45,"column":45}},"22":{"start":{"line":46,"column":2},"end":{"line":46,"column":9}},"23":{"start":{"line":48,"column":0},"end":{"line":48,"column":46}},"24":{"start":{"line":49,"column":0},"end":{"line":49,"column":43}},"25":{"start":{"line":50,"column":0},"end":{"line":50,"column":43}},"26":{"start":{"line":51,"column":0},"end":{"line":51,"column":50}},"27":{"start":{"line":52,"column":0},"end":{"line":52,"column":52}},"28":{"start":{"line":53,"column":0},"end":{"line":55,"column":4}},"29":{"start":{"line":56,"column":0},"end":{"line":58,"column":3}},"30":{"start":{"line":57,"column":2},"end":{"line":57,"column":84}},"31":{"start":{"line":59,"column":0},"end":{"line":59,"column":27}},"32":{"start":{"line":60,"column":15},"end":{"line":60,"column":21}},"33":{"start":{"line":61,"column":0},"end":{"line":61,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":31}},"loc":{"start":{"line":34,"column":37},"end":{"line":34,"column":95}},"line":34},"1":{"name":"(anonymous_1)","decl":{"start":{"line":37,"column":16},"end":{"line":37,"column":17}},"loc":{"start":{"line":37,"column":30},"end":{"line":42,"column":1}},"line":37},"2":{"name":"(anonymous_2)","decl":{"start":{"line":44,"column":11},"end":{"line":44,"column":12}},"loc":{"start":{"line":44,"column":31},"end":{"line":47,"column":1}},"line":44},"3":{"name":"(anonymous_3)","decl":{"start":{"line":56,"column":16},"end":{"line":56,"column":17}},"loc":{"start":{"line":56,"column":36},"end":{"line":58,"column":1}},"line":56}},"branchMap":{"0":{"loc":{"start":{"line":34,"column":46},"end":{"line":34,"column":92}},"type":"cond-expr","locations":[{"start":{"line":34,"column":70},"end":{"line":34,"column":73}},{"start":{"line":34,"column":76},"end":{"line":34,"column":92}}],"line":34},"1":{"loc":{"start":{"line":34,"column":46},"end":{"line":34,"column":67}},"type":"binary-expr","locations":[{"start":{"line":34,"column":46},"end":{"line":34,"column":49}},{"start":{"line":34,"column":53},"end":{"line":34,"column":67}}],"line":34}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":11,"16":1,"17":1,"18":0,"19":1,"20":1,"21":15,"22":15,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":1,"32":1,"33":1},"f":{"0":11,"1":0,"2":15,"3":0},"b":{"0":[6,5],"1":[11,11]},"inputSourceMap":{"version":3,"sources":["app.js"],"names":["server","get","req","res","status","json","success","message","use","express","next","requestTime","Date","toISOString","queriesRoutes","blogsRoutes","userRoutes","commentsRoutes","subcriberRoutes","swaggerUi","serve","setup","swaggerDoc","explorer","all","AppError","originalUrl","globalErrorHandler"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAKA;;;;AAIA,MAAMA,MAAM,GAAG,uBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC1BA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,IAAAA,OAAO,EAAE,IAAV;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAArB;AACH,CAFD;AAIAP,MAAM,CAACQ,GAAP,CAAWC,iBAAQJ,IAAR,EAAX;AAEAL,MAAM,CAACQ,GAAP,CAAW,CAACN,GAAD,EAAMC,GAAN,EAAWO,IAAX,KAAoB;AAC7BR,EAAAA,GAAG,CAACS,WAAJ,GAAkB,IAAIC,IAAJ,GAAWC,WAAX,EAAlB;AACAH,EAAAA,IAAI;AACL,CAHD;AAKAV,MAAM,CAACQ,GAAP,CAAW,iBAAX,EAA8BM,cAA9B;AACAd,MAAM,CAACQ,GAAP,CAAW,eAAX,EAA4BO,aAA5B;AACAf,MAAM,CAACQ,GAAP,CAAW,eAAX,EAA4BQ,aAA5B;AACAhB,MAAM,CAACQ,GAAP,CAAW,kBAAX,EAA+BS,iBAA/B;AACAjB,MAAM,CAACQ,GAAP,CAAW,mBAAX,EAAgCU,kBAAhC;AACAlB,MAAM,CAACQ,GAAP,CACI,WADJ,EAEIW,0BAAUC,KAFd,EAGID,0BAAUE,KAAV,CAAgBC,YAAhB,EAA4B;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAA5B,CAHJ;AAOAvB,MAAM,CAACwB,GAAP,CAAW,GAAX,EAAgB,CAACtB,GAAD,EAAMC,GAAN,EAAWO,IAAX,KAAoB;AAClCA,EAAAA,IAAI,CAAC,IAAIe,iBAAJ,CAAc,cAAavB,GAAG,CAACwB,WAAY,kBAA3C,EAA8D,GAA9D,CAAD,CAAJ;AACD,CAFD;AAIE1B,MAAM,CAACQ,GAAP,CAAWmB,cAAX;eAGe3B,M","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\","sourcesContent":["import \"./database\";\r\nimport 'dotenv/config';\r\n\r\nimport AppError from \"./utils/appError\";\r\nimport globalErrorHandler from \"./controllers/error.controller\";\r\nimport express from 'express';\r\nimport queriesRoutes from './routes/query.route';\r\nimport blogsRoutes from './routes/blog.route';\r\nimport userRoutes from './routes/user.route';\r\nimport commentsRoutes from './routes/comments.route';\r\nimport subcriberRoutes from './routes/subcriber.route';\r\nimport swaggerUi from \"swagger-ui-express\";\r\nimport swaggerDoc from \"./api.json\";\r\n\r\n\r\n\r\n\r\nimport res from \"express/lib/response\";\r\n\r\n\r\n\r\nconst server = express();\r\n\r\nserver.get('/', (req, res) => {\r\n    res.status(200).json({success: true, message: \"You successfully on salim's app API\"})\r\n});\r\n\r\nserver.use(express.json());\r\n\r\nserver.use((req, res, next) => {\r\n  req.requestTime = new Date().toISOString();\r\n  next();\r\n});\r\n\r\nserver.use('/api/v1/queries', queriesRoutes);\r\nserver.use('/api/v1/blogs', blogsRoutes);\r\nserver.use('/api/v1/users', userRoutes);\r\nserver.use('/api/v1/comments', commentsRoutes);\r\nserver.use('/api/v1/subscribe', subcriberRoutes);\r\nserver.use(\r\n    \"/api-docs\",\r\n    swaggerUi.serve,\r\n    swaggerUi.setup(swaggerDoc, { explorer: true })\r\n);\r\n\r\n\r\nserver.all('*', (req, res, next) => {\r\n  next(new AppError(`Can't find ${req.originalUrl} on this server!`, 404));\r\n});\r\n\r\n  server.use(globalErrorHandler);\r\n\r\n\r\n  export default server;\r\n "]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e4fb26912f34e6e72a4cfd9d17a9d2cd24f3f15e","contentHash":"332602923478bddc6a7e6c9e723a1200358f37563c62551a4ef4106d01e6fc0b"},"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\index.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\index.js","statementMap":{"0":{"start":{"line":3,"column":16},"end":{"line":3,"column":59}},"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":25}},"2":{"start":{"line":7,"column":39},"end":{"line":7,"column":93}},"3":{"start":{"line":9,"column":0},"end":{"line":16,"column":3}},"4":{"start":{"line":13,"column":2},"end":{"line":13,"column":55}},"5":{"start":{"line":15,"column":2},"end":{"line":15,"column":55}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":31}},"loc":{"start":{"line":7,"column":37},"end":{"line":7,"column":95}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":8},"end":{"line":12,"column":9}},"loc":{"start":{"line":12,"column":14},"end":{"line":14,"column":1}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":10}},"loc":{"start":{"line":14,"column":14},"end":{"line":16,"column":1}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":46},"end":{"line":7,"column":92}},"type":"cond-expr","locations":[{"start":{"line":7,"column":70},"end":{"line":7,"column":73}},{"start":{"line":7,"column":76},"end":{"line":7,"column":92}}],"line":7},"1":{"loc":{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},"type":"binary-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":49}},{"start":{"line":7,"column":53},"end":{"line":7,"column":67}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0},"f":{"0":1,"1":1,"2":0},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["mongoose","connect","process","env","MONGODB_URL","useNewUrlParser","useUnifiedTopology","then","console","log","catch","e","message"],"mappings":";;AAAA;;AACA;;;;AAEAA,kBAASC,OAAT,CAAkB,GAAEC,OAAO,CAACC,GAAR,CAAYC,WAAY,EAA5C,EAA+C;AAC3CC,EAAAA,eAAe,EAAE,IAD0B;AAE3CC,EAAAA,kBAAkB,EAAE;AAFuB,CAA/C,EAICC,IAJD,CAIM,MAAM;AACRC,EAAAA,OAAO,CAACC,GAAR,CAAY,uCAAZ;AACH,CAND,EAOCC,KAPD,CAOQC,CAAD,IAAO;AACVH,EAAAA,OAAO,CAACC,GAAR,CAAY,8BAA4BE,CAAC,CAACC,OAA1C;AACH,CATD","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\","sourcesContent":["import mongoose from 'mongoose';\r\nimport 'dotenv/config';\r\n\r\nmongoose.connect(`${process.env.MONGODB_URL}`, {\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true\r\n})\r\n.then(() => {\r\n    console.log(\"App connected to Mongodb successfully\")\r\n})\r\n.catch((e) => {\r\n    console.log(\"Mongodb connection error \"+e.message);\r\n})"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"259c08951fb3ac926731b02fd3d34d3699c159dc","contentHash":"c5f17eac540f0bfd3832077cd0fd7485e52250b3ef3267d4b6cbb1f263c187ea"},"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\appError.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\appError.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":10,"column":4},"end":{"line":10,"column":19}},"3":{"start":{"line":11,"column":4},"end":{"line":11,"column":33}},"4":{"start":{"line":12,"column":4},"end":{"line":12,"column":69}},"5":{"start":{"line":13,"column":4},"end":{"line":13,"column":30}},"6":{"start":{"line":14,"column":4},"end":{"line":14,"column":52}},"7":{"start":{"line":19,"column":15},"end":{"line":19,"column":23}},"8":{"start":{"line":20,"column":0},"end":{"line":20,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":2},"end":{"line":9,"column":3}},"loc":{"start":{"line":9,"column":35},"end":{"line":15,"column":3}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":18},"end":{"line":12,"column":68}},"type":"cond-expr","locations":[{"start":{"line":12,"column":52},"end":{"line":12,"column":58}},{"start":{"line":12,"column":61},"end":{"line":12,"column":68}}],"line":12}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":1},"f":{"0":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"sources":["appError.js"],"names":["AppError","Error","constructor","message","statusCode","status","startsWith","isOperational","captureStackTrace"],"mappings":";;;;;;;AAAA,MAAMA,QAAN,SAAuBC,KAAvB,CAA6B;AACzBC,EAAAA,WAAW,CAACC,OAAD,EAAUC,UAAV,EAAsB;AAC/B,UAAMD,OAAN;AAEA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAKC,MAAL,GAAe,GAAED,UAAW,EAAd,CAAgBE,UAAhB,CAA2B,GAA3B,IAAkC,MAAlC,GAA2C,OAAzD;AACA,SAAKC,aAAL,GAAqB,IAArB;AAEAN,IAAAA,KAAK,CAACO,iBAAN,CAAwB,IAAxB,EAA8B,KAAKN,WAAnC;AACD;;AATwB;;eAYdF,Q","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\","sourcesContent":["class AppError extends Error {\r\n    constructor(message, statusCode) {\r\n      super(message);\r\n  \r\n      this.statusCode = statusCode;\r\n      this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';\r\n      this.isOperational = true;\r\n  \r\n      Error.captureStackTrace(this, this.constructor);\r\n    }\r\n  }\r\n  \r\nexport default AppError;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cfbf9f081315f0e0fec72254dc9930c33181ab68","contentHash":"dc7eefd2149076b09ffa804b5ec1ea4b5f96cf85d777bedb7c6bfee434fe3f83"},"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\error.controller.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\error.controller.js","statementMap":{"0":{"start":{"line":3,"column":16},"end":{"line":3,"column":68}},"1":{"start":{"line":5,"column":39},"end":{"line":5,"column":93}},"2":{"start":{"line":7,"column":54},"end":{"line":7,"column":73}},"3":{"start":{"line":7,"column":75},"end":{"line":7,"column":326}},"4":{"start":{"line":7,"column":125},"end":{"line":7,"column":161}},"5":{"start":{"line":7,"column":163},"end":{"line":7,"column":324}},"6":{"start":{"line":7,"column":224},"end":{"line":7,"column":287}},"7":{"start":{"line":7,"column":327},"end":{"line":7,"column":339}},"8":{"start":{"line":9,"column":33},"end":{"line":9,"column":489}},"9":{"start":{"line":9,"column":46},"end":{"line":9,"column":47}},"10":{"start":{"line":9,"column":91},"end":{"line":9,"column":131}},"11":{"start":{"line":9,"column":133},"end":{"line":9,"column":487}},"12":{"start":{"line":9,"column":194},"end":{"line":9,"column":236}},"13":{"start":{"line":9,"column":402},"end":{"line":9,"column":483}},"14":{"start":{"line":9,"column":490},"end":{"line":9,"column":504}},"15":{"start":{"line":11,"column":44},"end":{"line":11,"column":195}},"16":{"start":{"line":11,"column":62},"end":{"line":11,"column":166}},"17":{"start":{"line":11,"column":176},"end":{"line":11,"column":193}},"18":{"start":{"line":11,"column":196},"end":{"line":11,"column":207}},"19":{"start":{"line":13,"column":26},"end":{"line":16,"column":1}},"20":{"start":{"line":14,"column":18},"end":{"line":14,"column":54}},"21":{"start":{"line":15,"column":2},"end":{"line":15,"column":45}},"22":{"start":{"line":18,"column":32},"end":{"line":23,"column":1}},"23":{"start":{"line":19,"column":16},"end":{"line":19,"column":55}},"24":{"start":{"line":20,"column":2},"end":{"line":20,"column":21}},"25":{"start":{"line":21,"column":18},"end":{"line":21,"column":78}},"26":{"start":{"line":22,"column":2},"end":{"line":22,"column":45}},"27":{"start":{"line":25,"column":32},"end":{"line":29,"column":1}},"28":{"start":{"line":26,"column":17},"end":{"line":26,"column":64}},"29":{"start":{"line":26,"column":53},"end":{"line":26,"column":63}},"30":{"start":{"line":27,"column":18},"end":{"line":27,"column":60}},"31":{"start":{"line":28,"column":2},"end":{"line":28,"column":45}},"32":{"start":{"line":31,"column":21},"end":{"line":38,"column":1}},"33":{"start":{"line":32,"column":2},"end":{"line":37,"column":5}},"34":{"start":{"line":40,"column":22},"end":{"line":56,"column":1}},"35":{"start":{"line":42,"column":2},"end":{"line":55,"column":3}},"36":{"start":{"line":43,"column":4},"end":{"line":46,"column":7}},"37":{"start":{"line":49,"column":4},"end":{"line":49,"column":35}},"38":{"start":{"line":51,"column":4},"end":{"line":54,"column":7}},"39":{"start":{"line":58,"column":0},"end":{"line":72,"column":2}},"40":{"start":{"line":59,"column":2},"end":{"line":59,"column":41}},"41":{"start":{"line":60,"column":2},"end":{"line":60,"column":37}},"42":{"start":{"line":62,"column":2},"end":{"line":71,"column":3}},"43":{"start":{"line":63,"column":4},"end":{"line":63,"column":27}},"44":{"start":{"line":64,"column":9},"end":{"line":71,"column":3}},"45":{"start":{"line":65,"column":16},"end":{"line":65,"column":38}},"46":{"start":{"line":67,"column":4},"end":{"line":67,"column":69}},"47":{"start":{"line":67,"column":36},"end":{"line":67,"column":69}},"48":{"start":{"line":68,"column":4},"end":{"line":68,"column":69}},"49":{"start":{"line":68,"column":30},"end":{"line":68,"column":69}},"50":{"start":{"line":69,"column":4},"end":{"line":69,"column":81}},"51":{"start":{"line":69,"column":42},"end":{"line":69,"column":81}},"52":{"start":{"line":70,"column":4},"end":{"line":70,"column":30}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"loc":{"start":{"line":5,"column":37},"end":{"line":5,"column":95}},"line":5},"1":{"name":"ownKeys","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":16}},"loc":{"start":{"line":7,"column":41},"end":{"line":7,"column":341}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":7,"column":207},"end":{"line":7,"column":208}},"loc":{"start":{"line":7,"column":222},"end":{"line":7,"column":289}},"line":7},"3":{"name":"_objectSpread","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":22}},"loc":{"start":{"line":9,"column":31},"end":{"line":9,"column":506}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":9,"column":177},"end":{"line":9,"column":178}},"loc":{"start":{"line":9,"column":192},"end":{"line":9,"column":238}},"line":9},"5":{"name":"(anonymous_5)","decl":{"start":{"line":9,"column":385},"end":{"line":9,"column":386}},"loc":{"start":{"line":9,"column":400},"end":{"line":9,"column":485}},"line":9},"6":{"name":"_defineProperty","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":24}},"loc":{"start":{"line":11,"column":42},"end":{"line":11,"column":209}},"line":11},"7":{"name":"(anonymous_7)","decl":{"start":{"line":13,"column":26},"end":{"line":13,"column":27}},"loc":{"start":{"line":13,"column":33},"end":{"line":16,"column":1}},"line":13},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":32},"end":{"line":18,"column":33}},"loc":{"start":{"line":18,"column":39},"end":{"line":23,"column":1}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":25,"column":32},"end":{"line":25,"column":33}},"loc":{"start":{"line":25,"column":39},"end":{"line":29,"column":1}},"line":25},"10":{"name":"(anonymous_10)","decl":{"start":{"line":26,"column":47},"end":{"line":26,"column":48}},"loc":{"start":{"line":26,"column":53},"end":{"line":26,"column":63}},"line":26},"11":{"name":"(anonymous_11)","decl":{"start":{"line":31,"column":21},"end":{"line":31,"column":22}},"loc":{"start":{"line":31,"column":35},"end":{"line":38,"column":1}},"line":31},"12":{"name":"(anonymous_12)","decl":{"start":{"line":40,"column":22},"end":{"line":40,"column":23}},"loc":{"start":{"line":40,"column":36},"end":{"line":56,"column":1}},"line":40},"13":{"name":"(anonymous_13)","decl":{"start":{"line":58,"column":17},"end":{"line":58,"column":18}},"loc":{"start":{"line":58,"column":42},"end":{"line":72,"column":1}},"line":58}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":46},"end":{"line":5,"column":92}},"type":"cond-expr","locations":[{"start":{"line":5,"column":70},"end":{"line":5,"column":73}},{"start":{"line":5,"column":76},"end":{"line":5,"column":92}}],"line":5},"1":{"loc":{"start":{"line":5,"column":46},"end":{"line":5,"column":67}},"type":"binary-expr","locations":[{"start":{"line":5,"column":46},"end":{"line":5,"column":49}},{"start":{"line":5,"column":53},"end":{"line":5,"column":67}}],"line":5},"2":{"loc":{"start":{"line":7,"column":75},"end":{"line":7,"column":326}},"type":"if","locations":[{"start":{"line":7,"column":75},"end":{"line":7,"column":326}},{"start":{"line":7,"column":75},"end":{"line":7,"column":326}}],"line":7},"3":{"loc":{"start":{"line":7,"column":163},"end":{"line":7,"column":291}},"type":"binary-expr","locations":[{"start":{"line":7,"column":163},"end":{"line":7,"column":177}},{"start":{"line":7,"column":182},"end":{"line":7,"column":290}}],"line":7},"4":{"loc":{"start":{"line":9,"column":91},"end":{"line":9,"column":131}},"type":"cond-expr","locations":[{"start":{"line":9,"column":114},"end":{"line":9,"column":126}},{"start":{"line":9,"column":129},"end":{"line":9,"column":131}}],"line":9},"5":{"loc":{"start":{"line":9,"column":133},"end":{"line":9,"column":486}},"type":"cond-expr","locations":[{"start":{"line":9,"column":141},"end":{"line":9,"column":239}},{"start":{"line":9,"column":242},"end":{"line":9,"column":486}}],"line":9},"6":{"loc":{"start":{"line":9,"column":242},"end":{"line":9,"column":486}},"type":"cond-expr","locations":[{"start":{"line":9,"column":277},"end":{"line":9,"column":350}},{"start":{"line":9,"column":353},"end":{"line":9,"column":486}}],"line":9},"7":{"loc":{"start":{"line":11,"column":44},"end":{"line":11,"column":195}},"type":"if","locations":[{"start":{"line":11,"column":44},"end":{"line":11,"column":195}},{"start":{"line":11,"column":44},"end":{"line":11,"column":195}}],"line":11},"8":{"loc":{"start":{"line":42,"column":2},"end":{"line":55,"column":3}},"type":"if","locations":[{"start":{"line":42,"column":2},"end":{"line":55,"column":3}},{"start":{"line":42,"column":2},"end":{"line":55,"column":3}}],"line":42},"9":{"loc":{"start":{"line":59,"column":19},"end":{"line":59,"column":40}},"type":"binary-expr","locations":[{"start":{"line":59,"column":19},"end":{"line":59,"column":33}},{"start":{"line":59,"column":37},"end":{"line":59,"column":40}}],"line":59},"10":{"loc":{"start":{"line":60,"column":15},"end":{"line":60,"column":36}},"type":"binary-expr","locations":[{"start":{"line":60,"column":15},"end":{"line":60,"column":25}},{"start":{"line":60,"column":29},"end":{"line":60,"column":36}}],"line":60},"11":{"loc":{"start":{"line":62,"column":2},"end":{"line":71,"column":3}},"type":"if","locations":[{"start":{"line":62,"column":2},"end":{"line":71,"column":3}},{"start":{"line":62,"column":2},"end":{"line":71,"column":3}}],"line":62},"12":{"loc":{"start":{"line":64,"column":9},"end":{"line":71,"column":3}},"type":"if","locations":[{"start":{"line":64,"column":9},"end":{"line":71,"column":3}},{"start":{"line":64,"column":9},"end":{"line":71,"column":3}}],"line":64},"13":{"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":69}},"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":69}},{"start":{"line":67,"column":4},"end":{"line":67,"column":69}}],"line":67},"14":{"loc":{"start":{"line":68,"column":4},"end":{"line":68,"column":69}},"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":69}},{"start":{"line":68,"column":4},"end":{"line":68,"column":69}}],"line":68},"15":{"loc":{"start":{"line":69,"column":4},"end":{"line":69,"column":81}},"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":81}},{"start":{"line":69,"column":4},"end":{"line":69,"column":81}}],"line":69}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"b":{"0":[1,0],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"inputSourceMap":{"version":3,"sources":["error.controller.js"],"names":["handleCastErrorDB","err","message","path","value","AppError","handleDuplicateFieldsDB","errmsg","match","console","log","handleValidationErrorDB","errors","Object","values","map","el","join","sendErrorDev","res","status","statusCode","json","error","stack","sendErrorProd","isOperational","module","exports","req","next","process","env","NODE_ENV","name","code"],"mappings":"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","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\","sourcesContent":["import AppError from \"../utils/appError\";\r\n\r\nconst handleCastErrorDB = err => {\r\n  const message = `Invalid ${err.path}: ${err.value}.`;\r\n  return new AppError(message, 400);\r\n};\r\n\r\nconst handleDuplicateFieldsDB = err => {\r\n  const value = err.errmsg.match(/([\"'])(\\\\?.)*?\\1/)[0];\r\n  console.log(value);\r\n\r\n  const message = `Duplicate field value: ${value}. Please use another value!`;\r\n  return new AppError(message, 400);\r\n};\r\nconst handleValidationErrorDB = err => {\r\n  const errors = Object.values(err.errors).map(el => el.message);\r\n\r\n  const message = `Invalid input data. ${errors.join('. ')}`;\r\n  return new AppError(message, 400);\r\n};\r\n\r\nconst sendErrorDev = (err, res) => {\r\n  res.status(err.statusCode).json({\r\n    status: err.status,\r\n    error: err,\r\n    message: err.message,\r\n    stack: err.stack\r\n  });\r\n};\r\n\r\nconst sendErrorProd = (err, res) => {\r\n  // Operational, trusted error: send message to client\r\n  if (err.isOperational) {\r\n    res.status(err.statusCode).json({\r\n      status: err.status,\r\n      message: err.message\r\n    });\r\n\r\n    // Programming or other unknown error\r\n  } else {\r\n    // Log error\r\n    console.error('ERROR 💥', err);\r\n    // Send generic message\r\n    res.status(500).json({\r\n      status: 'error',\r\n      message: 'Something went very wrong!'\r\n    });\r\n  }\r\n};\r\n\r\nmodule.exports = (err, req, res, next) => {\r\n  err.statusCode = err.statusCode || 500;\r\n  err.status = err.status || 'error';\r\n\r\n  if (process.env.NODE_ENV === 'development') {\r\n    sendErrorDev(err, res);\r\n  } else if (process.env.NODE_ENV === 'production') {\r\n    let error = { ...err };\r\n\r\n    if (error.name === 'CastError') error = handleCastErrorDB(error);\r\n    if (error.code === 11000) error = handleDuplicateFieldsDB(error);\r\n    if (error.name === 'ValidationError')\r\n      error = handleValidationErrorDB(error);\r\n\r\n    sendErrorProd(error, res);\r\n  }\r\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6ed6dced4d3b76aaa467a6bdb0ab5202344da01d","contentHash":"d8f2418af1593b8b9264125e1216f388660969e099bd40ce2c8021b371c21bff"},"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\query.route.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\query.route.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":57}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":55}},"4":{"start":{"line":12,"column":12},"end":{"line":12,"column":53}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":40}},"7":{"start":{"line":18,"column":0},"end":{"line":18,"column":35}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":85}},"9":{"start":{"line":20,"column":0},"end":{"line":20,"column":87}},"10":{"start":{"line":21,"column":0},"end":{"line":21,"column":93}},"11":{"start":{"line":22,"column":15},"end":{"line":22,"column":21}},"12":{"start":{"line":23,"column":0},"end":{"line":23,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["query.route.js"],"names":["router","express","Router","post","saveQuery","get","protect","getAllQueries","getQueryById","delete","deleteQueryById"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAIA,MAAMA,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,MAAM,CAACG,IAAP,CAAY,GAAZ,EAAiBC,gBAAjB;AACAJ,MAAM,CAACK,GAAP,CAAW,GAAX,EAAgBC,aAAhB,EAAwB,sBAAW,OAAX,CAAxB,EAA6CC,oBAA7C;AACAP,MAAM,CAACK,GAAP,CAAW,MAAX,EAAmBC,aAAnB,EAA2B,sBAAW,OAAX,CAA3B,EAAgDE,mBAAhD;AACAR,MAAM,CAACS,MAAP,CAAc,MAAd,EAAsBH,aAAtB,EAA8B,sBAAW,OAAX,CAA9B,EAAmDI,sBAAnD;eAIeV,M","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\","sourcesContent":["import express from 'express';\r\nimport { getAllQueries, saveQuery, getQueryById, deleteQueryById } from '../controllers/query.controller';\r\nimport { protect } from '../controllers/auth.controller';\r\nimport { restrictTo } from '../controllers/auth.controller';\r\n\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post('/', saveQuery);\r\nrouter.get('/', protect,restrictTo('admin'), getAllQueries);\r\nrouter.get('/:id', protect,restrictTo('admin'), getQueryById);\r\nrouter.delete('/:id', protect,restrictTo('admin'), deleteQueryById);\r\n\r\n\r\n\r\nexport default router;\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"73e45f7b66f5560e3aa6a7229c03bba7924d1f91","contentHash":"07b495e7310b1aa143980d32bb9ffe435d8b424cf6ea52a5f43cd9bb803fead8"},"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\query.controller.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\query.controller.js","statementMap":{"0":{"start":{"line":3,"column":15},"end":{"line":3,"column":33}},"1":{"start":{"line":5,"column":13},"end":{"line":5,"column":77}},"2":{"start":{"line":7,"column":39},"end":{"line":7,"column":93}},"3":{"start":{"line":9,"column":0},"end":{"line":24,"column":2}},"4":{"start":{"line":10,"column":2},"end":{"line":23,"column":3}},"5":{"start":{"line":11,"column":21},"end":{"line":11,"column":58}},"6":{"start":{"line":12,"column":4},"end":{"line":17,"column":7}},"7":{"start":{"line":19,"column":4},"end":{"line":22,"column":7}},"8":{"start":{"line":26,"column":0},"end":{"line":35,"column":2}},"9":{"start":{"line":27,"column":18},"end":{"line":27,"column":45}},"10":{"start":{"line":28,"column":2},"end":{"line":34,"column":5}},"11":{"start":{"line":37,"column":0},"end":{"line":52,"column":2}},"12":{"start":{"line":38,"column":2},"end":{"line":51,"column":3}},"13":{"start":{"line":39,"column":18},"end":{"line":39,"column":62}},"14":{"start":{"line":40,"column":4},"end":{"line":45,"column":7}},"15":{"start":{"line":47,"column":4},"end":{"line":50,"column":7}},"16":{"start":{"line":54,"column":0},"end":{"line":67,"column":2}},"17":{"start":{"line":55,"column":2},"end":{"line":66,"column":3}},"18":{"start":{"line":56,"column":18},"end":{"line":56,"column":71}},"19":{"start":{"line":57,"column":4},"end":{"line":60,"column":7}},"20":{"start":{"line":62,"column":4},"end":{"line":65,"column":7}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":31}},"loc":{"start":{"line":7,"column":37},"end":{"line":7,"column":95}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":20},"end":{"line":9,"column":21}},"loc":{"start":{"line":9,"column":40},"end":{"line":24,"column":1}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":24},"end":{"line":26,"column":25}},"loc":{"start":{"line":26,"column":44},"end":{"line":35,"column":1}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":37,"column":23},"end":{"line":37,"column":24}},"loc":{"start":{"line":37,"column":43},"end":{"line":52,"column":1}},"line":37},"4":{"name":"(anonymous_4)","decl":{"start":{"line":54,"column":26},"end":{"line":54,"column":27}},"loc":{"start":{"line":54,"column":46},"end":{"line":67,"column":1}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":46},"end":{"line":7,"column":92}},"type":"cond-expr","locations":[{"start":{"line":7,"column":70},"end":{"line":7,"column":73}},{"start":{"line":7,"column":76},"end":{"line":7,"column":92}}],"line":7},"1":{"loc":{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},"type":"binary-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":49}},{"start":{"line":7,"column":53},"end":{"line":7,"column":67}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0},"f":{"0":1,"1":1,"2":0,"3":0,"4":0},"b":{"0":[1,0],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["query.controller.js"],"names":["exports","saveQuery","req","res","newQuery","Query","create","body","status","json","data","query","err","message","getAllQueries","queries","find","results","length","getQueryById","findById","params","id","deleteQueryById","findByIdAndDelete"],"mappings":";;AAAA;;AACA;;;;AAEAA,OAAO,CAACC,SAAR,GAAqB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAErC,MAAG;AACC,UAAMC,QAAQ,GAAG,MAAMC,eAAMC,MAAN,CAAaJ,GAAG,CAACK,IAAjB,CAAvB;AACAJ,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBD,MAAAA,MAAM,EAAE,iCADS;AAEjBE,MAAAA,IAAI,EAAE;AACNC,QAAAA,KAAK,EAAEP;AADD;AAFW,KAArB;AAOH,GATD,CASE,OAAOQ,GAAP,EAAY;AACVT,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBD,MAAAA,MAAM,EAAE,MADS;AAEjBK,MAAAA,OAAO,EAAED;AAFQ,KAArB;AAIH;AACJ,CAjBD;;AAmBAZ,OAAO,CAACc,aAAR,GAAwB,OAAOZ,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAMY,OAAO,GAAG,MAAMV,eAAMW,IAAN,EAAtB;AACAb,EAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBD,IAAAA,MAAM,EAAE,SADS;AAEjBS,IAAAA,OAAO,EAAEF,OAAO,CAACG,MAFA;AAGjBR,IAAAA,IAAI,EAAE;AACFK,MAAAA;AADE;AAHW,GAArB;AAOH,CATD;;AAWAf,OAAO,CAACmB,YAAR,GAAuB,OAAOjB,GAAP,EAAYC,GAAZ,KAAoB;AACvC,MAAG;AAEC,UAAMQ,KAAK,GAAG,MAAMN,eAAMe,QAAN,CAAelB,GAAG,CAACmB,MAAJ,CAAWC,EAA1B,CAApB;AACAnB,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBD,MAAAA,MAAM,EAAE,SADS;AAEjBE,MAAAA,IAAI,EAAE;AACFC,QAAAA;AADE;AAFW,KAArB;AAMH,GATD,CASE,OAAOC,GAAP,EAAY;AACVT,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBD,MAAAA,MAAM,EAAE,MADS;AAEjBK,MAAAA,OAAO,EAAED;AAFQ,KAArB;AAIC;AACR,CAhBD;;AAqBAZ,OAAO,CAACuB,eAAR,GAA0B,OAAOrB,GAAP,EAAYC,GAAZ,KAAoB;AAC1C,MAAG;AAEC,UAAMQ,KAAK,GAAG,MAAMN,eAAMmB,iBAAN,CAAwBtB,GAAG,CAACmB,MAAJ,CAAWC,EAAnC,CAApB;AACAnB,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBD,MAAAA,MAAM,EAAE,SADS;AAEjBK,MAAAA,OAAO,EAAG;AAFO,KAArB;AAIH,GAPD,CAOE,OAAOD,GAAP,EAAY;AACVT,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBD,MAAAA,MAAM,EAAE,MADS;AAEjBK,MAAAA,OAAO,EAAED;AAFQ,KAArB;AAIC;AACR,CAdD","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\","sourcesContent":["import { query } from 'express';\r\nimport Query from '../database/model/query.model';\r\n\r\nexports.saveQuery  = async (req, res) => {\r\n\r\n    try{\r\n        const newQuery = await Query.create(req.body);\r\n        res.status(201).json({\r\n            status: 'Query was successfully created!',\r\n            data: {\r\n            query: newQuery\r\n            }\r\n        });\r\n\r\n    } catch (err) {\r\n        res.status(400).json({\r\n            status: 'fail',\r\n            message: err\r\n        });\r\n    }\r\n};\r\n\r\nexports.getAllQueries = async (req, res) => {\r\n    const queries = await Query.find();\r\n    res.status(200).json({\r\n        status: 'success',\r\n        results: queries.length, \r\n        data: {\r\n            queries\r\n        }\r\n    });\r\n};\r\n\r\nexports.getQueryById = async (req, res) => {\r\n    try{\r\n        \r\n        const query = await Query.findById(req.params.id);\r\n        res.status(200).json({\r\n            status: 'success', \r\n            data: {\r\n                query\r\n            }\r\n        });\r\n    } catch (err) {\r\n        res.status(400).json({\r\n            status: 'fail',\r\n            message: err\r\n            });\r\n        }\r\n}\r\n\r\n\r\n\r\n\r\nexports.deleteQueryById = async (req, res) => {\r\n    try{\r\n        \r\n        const query = await Query.findByIdAndDelete(req.params.id);\r\n        res.status(200).json({\r\n            status: 'success', \r\n            message : \"Successfully deleted the query!!\"\r\n        });\r\n    } catch (err) {\r\n        res.status(400).json({\r\n            status: 'fail',\r\n            message: err\r\n            });\r\n        }\r\n}\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3dbfe394d442cf0a4eeed8406fbe4fb509a8c274","contentHash":"729867964b0893a67c8ae5741d7e98a30b75ac17cd43ae3ed61031896359e436"},"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\query.model.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\query.model.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":16},"end":{"line":8,"column":59}},"3":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"4":{"start":{"line":12,"column":20},"end":{"line":39,"column":2}},"5":{"start":{"line":41,"column":14},"end":{"line":41,"column":59}},"6":{"start":{"line":43,"column":15},"end":{"line":43,"column":20}},"7":{"start":{"line":44,"column":0},"end":{"line":44,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["query.model.js"],"names":["QuerySchema","mongoose","Schema","fullName","type","String","required","trim","uppercase","telNumber","email","lowercase","message","sendDate","Date","default","Query","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,WAAW,GAAG,IAAIC,kBAASC,MAAb,CAAoB;AACpCC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,IAAI,EAAEC,MADA;AAENC,IAAAA,QAAQ,EAAE,IAFJ;AAGNC,IAAAA,IAAI,EAAE,IAHA;AAINC,IAAAA,SAAS,EAAE;AAJL,GAD0B;AAOpCC,EAAAA,SAAS,EAAE;AACPL,IAAAA,IAAI,EAAEC,MADC;AAEPC,IAAAA,QAAQ,EAAE,IAFH;AAGPC,IAAAA,IAAI,EAAC;AAHE,GAPyB;AAYpCG,EAAAA,KAAK,EAAE;AACHN,IAAAA,IAAI,EAAEC,MADH;AAEHC,IAAAA,QAAQ,EAAE,IAFP;AAGH;AACAC,IAAAA,IAAI,EAAG,IAJJ;AAKHI,IAAAA,SAAS,EAAE;AALR,GAZ6B;AAmBpCC,EAAAA,OAAO,EAAE;AACLR,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,QAAQ,EAAE;AAFL,GAnB2B;AAuBpCO,EAAAA,QAAQ,EAAE;AACNT,IAAAA,IAAI,EAAEU,IADA;AAENC,IAAAA,OAAO,EAAE,IAAID,IAAJ;AAFH;AAvB0B,CAApB,CAApB;;AA6BA,MAAME,KAAK,GAAGf,kBAASgB,KAAT,CAAe,OAAf,EAAwBjB,WAAxB,CAAd;;eACegB,K","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst QuerySchema = new mongoose.Schema({\r\n    fullName: {\r\n        type: String,\r\n        required: true,\r\n        trim: true,\r\n        uppercase: true\r\n    },\r\n    telNumber: {\r\n        type: String,\r\n        required: true,\r\n        trim:true\r\n    },\r\n    email: {\r\n        type: String,\r\n        required: true,\r\n        // unique: true,\r\n        trim : true,\r\n        lowercase: true\r\n    },\r\n    message: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    sendDate: {\r\n        type: Date,\r\n        default: new Date()\r\n    }\r\n});\r\n\r\nconst Query = mongoose.model('Query', QuerySchema);\r\nexport default Query;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5960500a3d52ed3a101ae6d01f2e85f4e001f74d","contentHash":"5503132902fe5827ea5f16ab3a0e57eb31c13ff3155c41dabfd5f8dfa820a9db"},"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\auth.controller.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\auth.controller.js","statementMap":{"0":{"start":{"line":3,"column":12},"end":{"line":3,"column":27}},"1":{"start":{"line":5,"column":20},"end":{"line":5,"column":67}},"2":{"start":{"line":7,"column":12},"end":{"line":7,"column":75}},"3":{"start":{"line":9,"column":18},"end":{"line":9,"column":72}},"4":{"start":{"line":11,"column":16},"end":{"line":11,"column":70}},"5":{"start":{"line":13,"column":39},"end":{"line":13,"column":93}},"6":{"start":{"line":16,"column":18},"end":{"line":22,"column":1}},"7":{"start":{"line":17,"column":2},"end":{"line":21,"column":5}},"8":{"start":{"line":25,"column":0},"end":{"line":53,"column":3}},"9":{"start":{"line":26,"column":13},"end":{"line":31,"column":3}},"10":{"start":{"line":32,"column":16},"end":{"line":34,"column":4}},"11":{"start":{"line":36,"column":2},"end":{"line":41,"column":3}},"12":{"start":{"line":37,"column":4},"end":{"line":40,"column":7}},"13":{"start":{"line":43,"column":18},"end":{"line":43,"column":47}},"14":{"start":{"line":44,"column":2},"end":{"line":44,"column":17}},"15":{"start":{"line":45,"column":16},"end":{"line":45,"column":38}},"16":{"start":{"line":46,"column":2},"end":{"line":52,"column":5}},"17":{"start":{"line":54,"column":0},"end":{"line":80,"column":3}},"18":{"start":{"line":58,"column":6},"end":{"line":58,"column":14}},"19":{"start":{"line":60,"column":2},"end":{"line":62,"column":3}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":82}},"21":{"start":{"line":65,"column":15},"end":{"line":67,"column":24}},"22":{"start":{"line":69,"column":2},"end":{"line":71,"column":3}},"23":{"start":{"line":70,"column":4},"end":{"line":70,"column":75}},"24":{"start":{"line":75,"column":16},"end":{"line":75,"column":35}},"25":{"start":{"line":76,"column":2},"end":{"line":79,"column":5}},"26":{"start":{"line":81,"column":0},"end":{"line":106,"column":3}},"27":{"start":{"line":85,"column":2},"end":{"line":87,"column":3}},"28":{"start":{"line":86,"column":4},"end":{"line":86,"column":52}},"29":{"start":{"line":89,"column":2},"end":{"line":91,"column":3}},"30":{"start":{"line":90,"column":4},"end":{"line":90,"column":99}},"31":{"start":{"line":94,"column":18},"end":{"line":94,"column":105}},"32":{"start":{"line":97,"column":22},"end":{"line":97,"column":62}},"33":{"start":{"line":99,"column":2},"end":{"line":101,"column":3}},"34":{"start":{"line":100,"column":4},"end":{"line":100,"column":102}},"35":{"start":{"line":104,"column":2},"end":{"line":104,"column":25}},"36":{"start":{"line":105,"column":2},"end":{"line":105,"column":9}},"37":{"start":{"line":108,"column":0},"end":{"line":116,"column":2}},"38":{"start":{"line":109,"column":2},"end":{"line":115,"column":4}},"39":{"start":{"line":110,"column":4},"end":{"line":112,"column":5}},"40":{"start":{"line":111,"column":6},"end":{"line":111,"column":99}},"41":{"start":{"line":114,"column":4},"end":{"line":114,"column":11}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":31}},"loc":{"start":{"line":13,"column":37},"end":{"line":13,"column":95}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":18},"end":{"line":16,"column":19}},"loc":{"start":{"line":16,"column":24},"end":{"line":22,"column":1}},"line":16},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":42},"end":{"line":25,"column":43}},"loc":{"start":{"line":25,"column":68},"end":{"line":53,"column":1}},"line":25},"3":{"name":"(anonymous_3)","decl":{"start":{"line":54,"column":41},"end":{"line":54,"column":42}},"loc":{"start":{"line":54,"column":67},"end":{"line":80,"column":1}},"line":54},"4":{"name":"(anonymous_4)","decl":{"start":{"line":81,"column":43},"end":{"line":81,"column":44}},"loc":{"start":{"line":81,"column":69},"end":{"line":106,"column":1}},"line":81},"5":{"name":"(anonymous_5)","decl":{"start":{"line":108,"column":21},"end":{"line":108,"column":22}},"loc":{"start":{"line":108,"column":35},"end":{"line":116,"column":1}},"line":108},"6":{"name":"(anonymous_6)","decl":{"start":{"line":109,"column":9},"end":{"line":109,"column":10}},"loc":{"start":{"line":109,"column":29},"end":{"line":115,"column":3}},"line":109}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":92}},"type":"cond-expr","locations":[{"start":{"line":13,"column":70},"end":{"line":13,"column":73}},{"start":{"line":13,"column":76},"end":{"line":13,"column":92}}],"line":13},"1":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":67}},"type":"binary-expr","locations":[{"start":{"line":13,"column":46},"end":{"line":13,"column":49}},{"start":{"line":13,"column":53},"end":{"line":13,"column":67}}],"line":13},"2":{"loc":{"start":{"line":36,"column":2},"end":{"line":41,"column":3}},"type":"if","locations":[{"start":{"line":36,"column":2},"end":{"line":41,"column":3}},{"start":{"line":36,"column":2},"end":{"line":41,"column":3}}],"line":36},"3":{"loc":{"start":{"line":60,"column":2},"end":{"line":62,"column":3}},"type":"if","locations":[{"start":{"line":60,"column":2},"end":{"line":62,"column":3}},{"start":{"line":60,"column":2},"end":{"line":62,"column":3}}],"line":60},"4":{"loc":{"start":{"line":60,"column":6},"end":{"line":60,"column":25}},"type":"binary-expr","locations":[{"start":{"line":60,"column":6},"end":{"line":60,"column":12}},{"start":{"line":60,"column":16},"end":{"line":60,"column":25}}],"line":60},"5":{"loc":{"start":{"line":69,"column":2},"end":{"line":71,"column":3}},"type":"if","locations":[{"start":{"line":69,"column":2},"end":{"line":71,"column":3}},{"start":{"line":69,"column":2},"end":{"line":71,"column":3}}],"line":69},"6":{"loc":{"start":{"line":69,"column":6},"end":{"line":69,"column":69}},"type":"binary-expr","locations":[{"start":{"line":69,"column":6},"end":{"line":69,"column":11}},{"start":{"line":69,"column":15},"end":{"line":69,"column":69}}],"line":69},"7":{"loc":{"start":{"line":85,"column":2},"end":{"line":87,"column":3}},"type":"if","locations":[{"start":{"line":85,"column":2},"end":{"line":87,"column":3}},{"start":{"line":85,"column":2},"end":{"line":87,"column":3}}],"line":85},"8":{"loc":{"start":{"line":85,"column":6},"end":{"line":85,"column":81}},"type":"binary-expr","locations":[{"start":{"line":85,"column":6},"end":{"line":85,"column":31}},{"start":{"line":85,"column":35},"end":{"line":85,"column":81}}],"line":85},"9":{"loc":{"start":{"line":89,"column":2},"end":{"line":91,"column":3}},"type":"if","locations":[{"start":{"line":89,"column":2},"end":{"line":91,"column":3}},{"start":{"line":89,"column":2},"end":{"line":91,"column":3}}],"line":89},"10":{"loc":{"start":{"line":99,"column":2},"end":{"line":101,"column":3}},"type":"if","locations":[{"start":{"line":99,"column":2},"end":{"line":101,"column":3}},{"start":{"line":99,"column":2},"end":{"line":101,"column":3}}],"line":99},"11":{"loc":{"start":{"line":110,"column":4},"end":{"line":112,"column":5}},"type":"if","locations":[{"start":{"line":110,"column":4},"end":{"line":112,"column":5}},{"start":{"line":110,"column":4},"end":{"line":112,"column":5}}],"line":110}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":4,"6":1,"7":6,"8":1,"9":4,"10":4,"11":4,"12":4,"13":0,"14":0,"15":0,"16":0,"17":1,"18":6,"19":6,"20":0,"21":6,"22":6,"23":0,"24":6,"25":6,"26":1,"27":3,"28":3,"29":3,"30":0,"31":3,"32":3,"33":3,"34":0,"35":3,"36":3,"37":1,"38":6,"39":0,"40":0,"41":0},"f":{"0":4,"1":6,"2":4,"3":6,"4":3,"5":6,"6":0},"b":{"0":[1,3],"1":[4,4],"2":[4,0],"3":[0,6],"4":[6,6],"5":[0,6],"6":[6,6],"7":[3,0],"8":[3,3],"9":[0,3],"10":[0,3],"11":[0,0]},"inputSourceMap":{"version":3,"sources":["auth.controller.js"],"names":["signToken","id","jwt","sign","process","env","JWT_SECRET","expiresIn","JWT_EXPIRES_IN","exports","signup","req","res","next","user","email","body","password","name","role","oldUser","User","findOne","status","json","error","message","newUser","save","token","_id","data","login","AppError","select","correctPassword","protect","headers","authorization","startsWith","split","decoded","verify","currentUser","findById","restrictTo","roles","includes"],"mappings":"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","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\","sourcesContent":["import { promisify } from 'util';\r\nimport jwt from \"jsonwebtoken\";\r\nimport User from '../database/model/user.model';\r\nimport catchAsync from '../utils/catchAsync';\r\nimport AppError from './../utils/appError';\r\n\r\n\r\n// FUNCTION FOR CREATING JWT TOKES:\r\n\r\nconst signToken = id => {\r\n    return jwt.sign({ id }, process.env.JWT_SECRET, {\r\n        expiresIn: process.env.JWT_EXPIRES_IN\r\n    });\r\n}\r\n\r\n\r\n// SIGNING UP NEW USER WITH TOKEN TO LOGIN IMMEDIATELY\r\n\r\nexports.signup = catchAsync(async (req, res, next) => {\r\n\r\n\r\n  let user = {\r\n\r\n    email:req.body.email,\r\n    password:req.body.password,\r\n    name: req.body.name,\r\n    role: req.body.role\r\n\r\n  };\r\n\r\n\r\n  let oldUser  = await User.findOne({ email: req.body.email });\r\n  if (oldUser) {\r\n      return res.status(400).json({ error: true, message: \"You have already registered please Login\" });\r\n  }\r\n\r\n\r\n    const newUser = await new User(user);\r\n    newUser.save();\r\n\r\n    const token = signToken(newUser._id);\r\n\r\n    res.status(201).json({\r\n        status: 'success',\r\n        token,\r\n        data: {\r\n            user: newUser\r\n        }\r\n    })\r\n});\r\n\r\nexports.login = catchAsync(async (req, res, next) => {\r\n    const { email, password } = req.body;\r\n  \r\n    //  Check if email and password exist\r\n    if (!email || !password) {\r\n     return   next(new AppError('Please provide email and password!', 400));\r\n    }\r\n    //  Check if user exists && password is correct\r\n    const user = await User.findOne({ email }).select('+password');\r\n\r\n    if (!user || !(await user.correctPassword(password, user.password))) {\r\n      return next(new AppError('Incorrect email or password', 401));\r\n    }\r\n  \r\n    // // If everything ok, send token to client\r\n    // createSendToken(user, 200, res);\r\n\r\n    const token = signToken(user._id);\r\n    res.status(200).json({\r\n        status: 'success',\r\n        token\r\n    });\r\n\r\n  });\r\n\r\n\r\n  exports.protect = catchAsync(async (req, res, next) => {\r\n    // Getting token and check if it's there\r\n    let token;\r\n    if (req.headers.authorization && req.headers.authorization.startsWith('Bearer')) {\r\n      token = req.headers.authorization.split(' ')[1];\r\n    //   console.log(token);\r\n    }\r\n  \r\n    if (!token) {\r\n      return next(\r\n        new AppError('You are not logged in! Please log in to get access.', 401)\r\n      );\r\n    }\r\n  \r\n    // //  Verifying the token\r\n    const decoded = await promisify(jwt.verify)(token, process.env.JWT_SECRET);\r\n    // console.log(decoded);\r\n\r\n    // // 3) Check if user still exists\r\n\r\n    const currentUser = await User.findById(decoded.id);\r\n    if (!currentUser) {\r\n      return next(\r\n        new AppError(\r\n          'The user belonging to this token does no longer exist.',\r\n          401\r\n        )\r\n      );\r\n    }\r\n  \r\n    // // GRANT ACCESS TO PROTECTED ROUTE\r\n    req.user = currentUser;\r\n    next();\r\n  });  \r\n  \r\n  exports.restrictTo = (...roles) => {\r\n    return (req, res, next) => {\r\n\r\n      if (!roles.includes(req.user.role)) {\r\n        return next(\r\n          new AppError('You do not have permission to perform this action', 403)\r\n        );\r\n      }\r\n  \r\n      next();\r\n    };\r\n  };\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5b7f4ca1dad2052fbba31eb66d5112ee498c235d","contentHash":"dca56e8e5327c2ed9640b0a840ded28d8c913ff31fb4b7d3872c04e6911d56e7"},"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\user.model.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\user.model.js","statementMap":{"0":{"start":{"line":3,"column":16},"end":{"line":3,"column":59}},"1":{"start":{"line":5,"column":17},"end":{"line":5,"column":61}},"2":{"start":{"line":7,"column":16},"end":{"line":7,"column":59}},"3":{"start":{"line":9,"column":39},"end":{"line":9,"column":93}},"4":{"start":{"line":11,"column":19},"end":{"line":45,"column":2}},"5":{"start":{"line":46,"column":0},"end":{"line":52,"column":3}},"6":{"start":{"line":48,"column":2},"end":{"line":48,"column":50}},"7":{"start":{"line":48,"column":36},"end":{"line":48,"column":50}},"8":{"start":{"line":49,"column":2},"end":{"line":49,"column":66}},"9":{"start":{"line":54,"column":0},"end":{"line":56,"column":2}},"10":{"start":{"line":55,"column":2},"end":{"line":55,"column":74}},"11":{"start":{"line":58,"column":13},"end":{"line":58,"column":56}},"12":{"start":{"line":60,"column":0},"end":{"line":60,"column":22}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":31}},"loc":{"start":{"line":9,"column":37},"end":{"line":9,"column":95}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":46,"column":23},"end":{"line":46,"column":24}},"loc":{"start":{"line":46,"column":45},"end":{"line":52,"column":1}},"line":46},"2":{"name":"(anonymous_2)","decl":{"start":{"line":54,"column":37},"end":{"line":54,"column":38}},"loc":{"start":{"line":54,"column":86},"end":{"line":56,"column":1}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":92}},"type":"cond-expr","locations":[{"start":{"line":9,"column":70},"end":{"line":9,"column":73}},{"start":{"line":9,"column":76},"end":{"line":9,"column":92}}],"line":9},"1":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":67}},"type":"binary-expr","locations":[{"start":{"line":9,"column":46},"end":{"line":9,"column":49}},{"start":{"line":9,"column":53},"end":{"line":9,"column":67}}],"line":9},"2":{"loc":{"start":{"line":48,"column":2},"end":{"line":48,"column":50}},"type":"if","locations":[{"start":{"line":48,"column":2},"end":{"line":48,"column":50}},{"start":{"line":48,"column":2},"end":{"line":48,"column":50}}],"line":48}},"s":{"0":1,"1":1,"2":1,"3":3,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":6,"11":1,"12":1},"f":{"0":3,"1":0,"2":6},"b":{"0":[0,3],"1":[3,3],"2":[0,0]},"inputSourceMap":{"version":3,"sources":["user.model.js"],"names":["userSchema","mongoose","Schema","name","type","String","required","role","enum","default","email","lowercase","validate","validator","isEmail","password","minlength","select","pre","next","isModified","bcrypt","hash","methods","correctPassword","candidatePassword","userPassword","compare","User","model","module","exports"],"mappings":";;AAAA;;AACA;;AACA;;;;AAIA,MAAMA,UAAU,GAAG,IAAIC,kBAASC,MAAb,CAAoB;AAGrCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,2BAAP;AAFN,GAH+B;AAOpCC,EAAAA,IAAI,EAAC;AACJH,IAAAA,IAAI,EAAEC,MADF;AAEJG,IAAAA,IAAI,EAAE,CAAC,aAAD,EAAgB,OAAhB,CAFF;AAGJC,IAAAA,OAAO,EAAE;AAHL,GAP+B;AAYrCC,EAAAA,KAAK,EAAE;AACLN,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,oBAAP,CAFL;AAGL;AACAK,IAAAA,SAAS,EAAE,IAJN;AAKLC,IAAAA,QAAQ,EAAE,CAACC,mBAAUC,OAAX,EAAoB,uBAApB;AALL,GAZ8B;AAmBrCC,EAAAA,QAAQ,EAAE;AACRX,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,2BAAP,CAFF;AAGRU,IAAAA,SAAS,EAAE,CAHH;AAIRC,IAAAA,MAAM,EAAE;AAJA,GAnB2B,CAyBrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAnCqC,CAApB,CAAnB;AAuCAjB,UAAU,CAACkB,GAAX,CAAe,MAAf,EAAuB,gBAAeC,IAAf,EAAqB;AAC1C;AACA,MAAI,CAAC,KAAKC,UAAL,CAAgB,UAAhB,CAAL,EAAkC,OAAOD,IAAI,EAAX;AAElC,OAAKJ,QAAL,GAAgB,MAAMM,kBAAOC,IAAP,CAAY,KAAKP,QAAjB,EAA2B,EAA3B,CAAtB,CAJ0C,CAM1C;AACA;AACA;AAED,CAVD,E,CAYA;;AAEAf,UAAU,CAACuB,OAAX,CAAmBC,eAAnB,GAAqC,gBAAeC,iBAAf,EAAkCC,YAAlC,EAA+C;AAClF,SAAO,MAAML,kBAAOM,OAAP,CAAeF,iBAAf,EAAkCC,YAAlC,CAAb;AACD,CAFD;;AAKA,MAAME,IAAI,GAAG3B,kBAAS4B,KAAT,CAAe,MAAf,EAAuB7B,UAAvB,CAAb;;AAEA8B,MAAM,CAACC,OAAP,GAAiBH,IAAjB","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\","sourcesContent":["import mongoose from \"mongoose\";\r\nimport validator from \"validator\";\r\nimport bcrypt from \"bcryptjs\"\r\n\r\n\r\n\r\nconst userSchema = new mongoose.Schema({\r\n\r\n  \r\n  name: {\r\n    type: String,\r\n    required: [true, 'Please tell us your name!']\r\n  },\r\n   role:{\r\n    type: String,\r\n    enum: ['normal-user', 'admin'],\r\n    default: 'normal-user'\r\n  },\r\n  email: {\r\n    type: String,\r\n    required: [true, 'Provide your email'],\r\n    // unique: true,\r\n    lowercase: true,\r\n    validate: [validator.isEmail, 'Provide a valid email']\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: [true, 'Please provide a password'],\r\n    minlength: 8,\r\n    select: false\r\n   },\r\n  // passwordConfirm: {\r\n  //   type: String,\r\n  //   required: [true, 'Please confirm your password'],\r\n  //   validate: {\r\n  //     // This only works on CREATE and SAVE!!!\r\n  //     validator: function(el) {\r\n  //       return el === this.password;\r\n  //     },\r\n  //     message: 'Passwords are not the same!'\r\n  //   }\r\n  // }\r\n\r\n});\r\n\r\nuserSchema.pre('save', async function(next) {\r\n  // only run if pw has modified\r\n  if (!this.isModified('password')) return next();\r\n\r\n  this.password = await bcrypt.hash(this.password, 12);\r\n\r\n  //delete pw\r\n  // this.passwordConfirm = undefined;\r\n  // next();\r\n\r\n});\r\n\r\n// CHECKING IF PASSWORD IS CORRECT\r\n\r\nuserSchema.methods.correctPassword = async function(candidatePassword, userPassword){\r\n  return await bcrypt.compare(candidatePassword, userPassword);\r\n};\r\n\r\n\r\nconst User = mongoose.model('User', userSchema);\r\n\r\nmodule.exports = User;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"db7abffd4118447bff864a4a2409bc96b4678dfb","contentHash":"9969c4c3d839456b8541309dd29c023c16a8c25bf9f393ec3fd5b09ef2a7c7cb"},"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\catchAsync.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\catchAsync.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":7,"column":2}},"1":{"start":{"line":4,"column":2},"end":{"line":6,"column":4}},"2":{"start":{"line":5,"column":4},"end":{"line":5,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":17},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":23},"end":{"line":7,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":9},"end":{"line":4,"column":10}},"loc":{"start":{"line":4,"column":29},"end":{"line":6,"column":3}},"line":4}},"branchMap":{},"s":{"0":1,"1":8,"2":16},"f":{"0":8,"1":16},"b":{},"inputSourceMap":{"version":3,"sources":["catchAsync.js"],"names":["module","exports","fn","req","res","next","catch"],"mappings":";;AAAAA,MAAM,CAACC,OAAP,GAAiBC,EAAE,IAAI;AACnB,SAAO,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACzBH,IAAAA,EAAE,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,CAAF,CAAmBC,KAAnB,CAAyBD,IAAzB;AACD,GAFD;AAGD,CAJH","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\","sourcesContent":["module.exports = fn => {\r\n    return (req, res, next) => {\r\n      fn(req, res, next).catch(next);\r\n    };\r\n  };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b12a7e7727a9a421c00f17d7f4f77a500cbd6ad8","contentHash":"3063c1c3baa23c2ec3fcd51981f81801b6645dec21626033dabf6542d96dd608"},"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\blog.route.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\blog.route.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":57}},"3":{"start":{"line":10,"column":12},"end":{"line":10,"column":53}},"4":{"start":{"line":12,"column":12},"end":{"line":12,"column":53}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":55}},"6":{"start":{"line":16,"column":39},"end":{"line":16,"column":93}},"7":{"start":{"line":18,"column":16},"end":{"line":18,"column":47}},"8":{"start":{"line":20,"column":19},"end":{"line":26,"column":1}},"9":{"start":{"line":21,"column":2},"end":{"line":25,"column":3}},"10":{"start":{"line":22,"column":4},"end":{"line":22,"column":19}},"11":{"start":{"line":24,"column":4},"end":{"line":24,"column":37}},"12":{"start":{"line":28,"column":16},"end":{"line":31,"column":2}},"13":{"start":{"line":33,"column":15},"end":{"line":33,"column":40}},"14":{"start":{"line":35,"column":0},"end":{"line":35,"column":73}},"15":{"start":{"line":36,"column":0},"end":{"line":36,"column":35}},"16":{"start":{"line":37,"column":0},"end":{"line":37,"column":38}},"17":{"start":{"line":38,"column":0},"end":{"line":38,"column":58}},"18":{"start":{"line":39,"column":0},"end":{"line":39,"column":91}},"19":{"start":{"line":40,"column":15},"end":{"line":40,"column":21}},"20":{"start":{"line":41,"column":0},"end":{"line":41,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":31}},"loc":{"start":{"line":16,"column":37},"end":{"line":16,"column":95}},"line":16},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":19},"end":{"line":20,"column":20}},"loc":{"start":{"line":20,"column":38},"end":{"line":26,"column":1}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":92}},"type":"cond-expr","locations":[{"start":{"line":16,"column":70},"end":{"line":16,"column":73}},{"start":{"line":16,"column":76},"end":{"line":16,"column":92}}],"line":16},"1":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":67}},"type":"binary-expr","locations":[{"start":{"line":16,"column":46},"end":{"line":16,"column":49}},{"start":{"line":16,"column":53},"end":{"line":16,"column":67}}],"line":16},"2":{"loc":{"start":{"line":21,"column":2},"end":{"line":25,"column":3}},"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":25,"column":3}},{"start":{"line":21,"column":2},"end":{"line":25,"column":3}}],"line":21}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1},"f":{"0":2,"1":0},"b":{"0":[0,2],"1":[2,2],"2":[0,0]},"inputSourceMap":{"version":3,"sources":["blog.route.js"],"names":["storage","multer","diskStorage","fileFilter","req","file","cb","mimetype","startsWith","uploads","router","express","Router","post","protect","single","saveBlog","get","getAllBlogs","getBlogById","patch","updateBlogById","delete","deleteBlogById"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;AAGA,MAAMA,OAAO,GAAGC,gBAAOC,WAAP,CAAmB,EAAnB,CAAhB;;AACA,MAAMC,UAAU,GAAG,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAClC,MAAID,IAAI,CAACE,QAAL,CAAcC,UAAd,CAAyB,OAAzB,CAAJ,EAAuC;AACnCF,IAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH,GAFD,MAEO;AACHA,IAAAA,EAAE,CAAC,qBAAD,EAAwB,KAAxB,CAAF;AACH;AACJ,CAND;;AAOA,MAAMG,OAAO,GAAG,qBAAO;AAAET,EAAAA,OAAF;AAAWG,EAAAA;AAAX,CAAP,CAAhB;;AAKA,MAAMO,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,MAAM,CAACG,IAAP,CAAY,GAAZ,EAAgBC,aAAhB,EAAyBL,OAAO,CAACM,MAAR,CAAe,OAAf,CAAzB,EAAkDC,cAAlD;AACAN,MAAM,CAACO,GAAP,CAAW,GAAX,EAAgBC,iBAAhB;AACAR,MAAM,CAACO,GAAP,CAAW,MAAX,EAAmBE,iBAAnB;AACAT,MAAM,CAACU,KAAP,CAAa,MAAb,EAAoBN,aAApB,EAA6BO,oBAA7B;AACAX,MAAM,CAACY,MAAP,CAAc,MAAd,EAAqBR,aAArB,EAA6B,sBAAW,OAAX,CAA7B,EAAkDS,oBAAlD;eAMeb,M","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\","sourcesContent":["import express from 'express';\r\nimport { getAllBlogs, saveBlog, getBlogById, updateBlogById, deleteBlogById } from '../controllers/blog.controller';\r\nimport { protect } from '../controllers/auth.controller';\r\nimport { restrictTo } from '../controllers/auth.controller';\r\nimport multer from 'multer';\r\n\r\n\r\nconst storage = multer.diskStorage({});\r\nconst fileFilter = (req, file, cb) => {\r\n    if (file.mimetype.startsWith(\"image\")) {\r\n        cb(null, true);\r\n    } else {\r\n        cb(\"invalid image file!\", false);\r\n    }\r\n};\r\nconst uploads = multer({ storage, fileFilter });\r\n\r\n\r\n\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post('/',protect, uploads.single(\"image\"), saveBlog);\r\nrouter.get('/', getAllBlogs);\r\nrouter.get('/:id', getBlogById);\r\nrouter.patch('/:id',protect, updateBlogById);\r\nrouter.delete('/:id',protect,restrictTo('admin'), deleteBlogById);\r\n\r\n\r\n\r\n\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3992717d6b8d4ab7a77ff116a42f90c48acc9687","contentHash":"d4a228ec349c2e6b2f1fcd8734337ce52323385f6f145bb7a00be3743173c513"},"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\blog.controller.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\blog.controller.js","statementMap":{"0":{"start":{"line":3,"column":15},"end":{"line":3,"column":33}},"1":{"start":{"line":5,"column":12},"end":{"line":5,"column":75}},"2":{"start":{"line":7,"column":16},"end":{"line":7,"column":68}},"3":{"start":{"line":9,"column":18},"end":{"line":9,"column":72}},"4":{"start":{"line":11,"column":18},"end":{"line":11,"column":72}},"5":{"start":{"line":13,"column":39},"end":{"line":13,"column":93}},"6":{"start":{"line":16,"column":0},"end":{"line":43,"column":3}},"7":{"start":{"line":17,"column":13},"end":{"line":17,"column":21}},"8":{"start":{"line":18,"column":16},"end":{"line":20,"column":4}},"9":{"start":{"line":22,"column":2},"end":{"line":27,"column":3}},"10":{"start":{"line":23,"column":4},"end":{"line":26,"column":7}},"11":{"start":{"line":29,"column":2},"end":{"line":33,"column":3}},"12":{"start":{"line":30,"column":4},"end":{"line":30,"column":57}},"13":{"start":{"line":32,"column":4},"end":{"line":32,"column":111}},"14":{"start":{"line":35,"column":16},"end":{"line":35,"column":45}},"15":{"start":{"line":36,"column":2},"end":{"line":36,"column":17}},"16":{"start":{"line":37,"column":2},"end":{"line":42,"column":5}},"17":{"start":{"line":45,"column":0},"end":{"line":54,"column":2}},"18":{"start":{"line":46,"column":16},"end":{"line":46,"column":42}},"19":{"start":{"line":47,"column":2},"end":{"line":53,"column":5}},"20":{"start":{"line":56,"column":0},"end":{"line":67,"column":3}},"21":{"start":{"line":57,"column":15},"end":{"line":57,"column":58}},"22":{"start":{"line":59,"column":2},"end":{"line":61,"column":3}},"23":{"start":{"line":60,"column":4},"end":{"line":60,"column":74}},"24":{"start":{"line":63,"column":2},"end":{"line":66,"column":5}},"25":{"start":{"line":87,"column":0},"end":{"line":105,"column":2}},"26":{"start":{"line":88,"column":2},"end":{"line":104,"column":3}},"27":{"start":{"line":89,"column":17},"end":{"line":92,"column":6}},"28":{"start":{"line":93,"column":4},"end":{"line":98,"column":7}},"29":{"start":{"line":100,"column":4},"end":{"line":103,"column":7}},"30":{"start":{"line":107,"column":0},"end":{"line":120,"column":2}},"31":{"start":{"line":108,"column":2},"end":{"line":119,"column":3}},"32":{"start":{"line":109,"column":4},"end":{"line":109,"column":57}},"33":{"start":{"line":110,"column":4},"end":{"line":113,"column":7}},"34":{"start":{"line":115,"column":4},"end":{"line":118,"column":7}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":31}},"loc":{"start":{"line":13,"column":37},"end":{"line":13,"column":95}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":44},"end":{"line":16,"column":45}},"loc":{"start":{"line":16,"column":70},"end":{"line":43,"column":1}},"line":16},"2":{"name":"(anonymous_2)","decl":{"start":{"line":45,"column":22},"end":{"line":45,"column":23}},"loc":{"start":{"line":45,"column":42},"end":{"line":54,"column":1}},"line":45},"3":{"name":"(anonymous_3)","decl":{"start":{"line":56,"column":47},"end":{"line":56,"column":48}},"loc":{"start":{"line":56,"column":73},"end":{"line":67,"column":1}},"line":56},"4":{"name":"(anonymous_4)","decl":{"start":{"line":87,"column":25},"end":{"line":87,"column":26}},"loc":{"start":{"line":87,"column":45},"end":{"line":105,"column":1}},"line":87},"5":{"name":"(anonymous_5)","decl":{"start":{"line":107,"column":25},"end":{"line":107,"column":26}},"loc":{"start":{"line":107,"column":45},"end":{"line":120,"column":1}},"line":107}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":92}},"type":"cond-expr","locations":[{"start":{"line":13,"column":70},"end":{"line":13,"column":73}},{"start":{"line":13,"column":76},"end":{"line":13,"column":92}}],"line":13},"1":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":67}},"type":"binary-expr","locations":[{"start":{"line":13,"column":46},"end":{"line":13,"column":49}},{"start":{"line":13,"column":53},"end":{"line":13,"column":67}}],"line":13},"2":{"loc":{"start":{"line":22,"column":2},"end":{"line":27,"column":3}},"type":"if","locations":[{"start":{"line":22,"column":2},"end":{"line":27,"column":3}},{"start":{"line":22,"column":2},"end":{"line":27,"column":3}}],"line":22},"3":{"loc":{"start":{"line":29,"column":2},"end":{"line":33,"column":3}},"type":"if","locations":[{"start":{"line":29,"column":2},"end":{"line":33,"column":3}},{"start":{"line":29,"column":2},"end":{"line":33,"column":3}}],"line":29},"4":{"loc":{"start":{"line":59,"column":2},"end":{"line":61,"column":3}},"type":"if","locations":[{"start":{"line":59,"column":2},"end":{"line":61,"column":3}},{"start":{"line":59,"column":2},"end":{"line":61,"column":3}}],"line":59}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":4,"6":1,"7":3,"8":3,"9":3,"10":3,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0},"f":{"0":4,"1":3,"2":1,"3":0,"4":0,"5":0},"b":{"0":[3,1],"1":[4,4],"2":[3,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"sources":["blog.controller.js"],"names":["exports","saveBlog","req","res","next","blog","body","hasBlog","Blog","findOne","title","status","json","error","message","file","image","newBlog","save","data","getAllBlogs","blogs","find","results","length","getBlogById","findById","params","id","AppError","updateBlogById","findByIdAndUpdate","new","runValidators","err","deleteBlogById","findByIdAndDelete"],"mappings":"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","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\","sourcesContent":["import { blog } from 'express';\r\nimport Blog from '../database/model/blog.model';\r\nimport AppError from '../utils/appError';\r\nimport fileUpload from '../utils/fileUpload';\r\n\r\n// import errorController from './error.controller';\r\nimport catchAsync from '../utils/catchAsync'\r\n\r\n\r\nexports.saveBlog = catchAsync(async (req, res, next) => {\r\n\r\n    let blog = (req.body)\r\n\r\n\r\n    let hasBlog  = await Blog.findOne({title: req.body.title});\r\n    if (hasBlog) {\r\n        return res.status(400).json({ error: true, message: \"There is already a blog like this!!\" });\r\n    }\r\n\r\n\r\n    if (req.file) {\r\n        req.body.image = await fileUpload(req);\r\n    } else {\r\n        req.body.image =\r\n            \"https://res.cloudinary.com/salim-atlp-brand/image/upload/v1647272711/article_vmtmzu.png\";\r\n    }\r\n\r\nlet newBlog = await new Blog(blog);\r\nnewBlog.save();\r\n\r\n\r\n    res.status(201).json({\r\n      status: 'success',\r\n      data: {\r\n        blog: newBlog\r\n      }\r\n    });\r\n  });\r\n\r\n\r\nexports.getAllBlogs = async (req, res) => {\r\n    const blogs = await Blog.find();\r\n    res.status(200).json({\r\n        status: 'success',\r\n        results: blogs.length, \r\n        data: {\r\n            blogs\r\n        }\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\nexports.getBlogById= catchAsync(async (req, res, next) => {\r\n    const blog = await Blog.findById(req.params.id);\r\n\r\n    if (!blog) {\r\n        return next(new AppError('No blog found with that ID', 404));\r\n      }\r\n\r\n\r\n    res.status(200).json({\r\n      status: 'success',\r\n      data: blog\r\n    });\r\n  });\r\n\r\n\r\n\r\n\r\n// exports.getBlogById = async (req, res) => {\r\n//     try{\r\n        \r\n//         const blog = await Blog.findById(req.params.id);\r\n//         res.status(200).json({\r\n//             status: 'success', \r\n//             data: {\r\n//                 blog\r\n//             }\r\n//         });\r\n//         // if (!blog) {\r\n//         //     return next(new AppError('No blog found with that ID', 404));\r\n//         //   }\r\n//     } catch (err) {\r\n//         res.status(400).json({\r\n//             status: 'fail',\r\n//             message: err\r\n//             });\r\n//         }\r\n\r\n// };\r\nexports.updateBlogById = async (req, res) => {\r\n    try{\r\n        \r\n        const blog = await Blog.findByIdAndUpdate(req.params.id, req.body, {\r\n            new: true,\r\n            runValidators: true\r\n        })\r\n        res.status(200).json({\r\n            status: 'success', \r\n            data: {\r\n                blog\r\n            }\r\n        });\r\n        // if(!blog) return res.status(404).json({success: false, message: \"Blog not found\"}) ;\r\n    } catch (err) {\r\n        res.status(400).json({\r\n            status: 'fail',\r\n            message: err\r\n            });\r\n        }\r\n\r\n};\r\n\r\nexports.deleteBlogById = async (req, res) => {\r\n    try{\r\n        await Blog.findByIdAndDelete(req.params.id);\r\n\r\n        res.status(200).json({\r\n            status: 'success', \r\n            message: `blog with id: ${req.params.id} is deleted successfully!!`\r\n        });\r\n        // if(!blog) return res.status(404).json({success: false, message: \"Blog not found\"}) ;\r\n    } catch (err) {\r\n        res.status(404).json({\r\n            status: 'fail',\r\n            message: err\r\n            });\r\n        }\r\n\r\n}\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dee788183c9a059603deefe71e5d004f70a6e778","contentHash":"46ab28009b86f9a12a32adc0edcf7204332fbb7a8480551314e64d57bd7f4b04"},"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\blog.model.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\blog.model.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":16},"end":{"line":8,"column":59}},"3":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"4":{"start":{"line":12,"column":19},"end":{"line":37,"column":2}},"5":{"start":{"line":39,"column":13},"end":{"line":39,"column":56}},"6":{"start":{"line":41,"column":15},"end":{"line":41,"column":19}},"7":{"start":{"line":42,"column":0},"end":{"line":42,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["blog.model.js"],"names":["BlogSchema","mongoose","Schema","title","type","String","required","image","introduction","blogBody","comments","Types","ObjectId","ref","sendDate","Date","default","Blog","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,UAAU,GAAG,IAAIC,kBAASC,MAAb,CAAoB;AACnCC,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAEC,MADH;AAEHC,IAAAA,QAAQ,EAAE;AAFP,GAD4B;AAKnCC,EAAAA,KAAK,EAAE;AACHH,IAAAA,IAAI,EAAEC,MADH;AAEHC,IAAAA,QAAQ,EAAE;AAFP,GAL4B;AASnCE,EAAAA,YAAY,EAAE;AACVJ,IAAAA,IAAI,EAAEC,MADI;AAEVC,IAAAA,QAAQ,EAAE;AAFA,GATqB;AAanCG,EAAAA,QAAQ,EAAE;AACNL,IAAAA,IAAI,EAAEC,MADA;AAENC,IAAAA,QAAQ,EAAE;AAFJ,GAbyB;AAiBtCI,EAAAA,QAAQ,EAAE,CACT;AACCN,IAAAA,IAAI,EAAEH,kBAASC,MAAT,CAAgBS,KAAhB,CAAsBC,QAD7B;AAECC,IAAAA,GAAG,EAAE;AAFN,GADS,CAjB4B;AAuBnCC,EAAAA,QAAQ,EAAE;AACNV,IAAAA,IAAI,EAAEW,IADA;AAENC,IAAAA,OAAO,EAAE,IAAID,IAAJ;AAFH;AAvByB,CAApB,CAAnB;;AA6BA,MAAME,IAAI,GAAGhB,kBAASiB,KAAT,CAAe,MAAf,EAAuBlB,UAAvB,CAAb;;eACeiB,I","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst BlogSchema = new mongoose.Schema({\r\n    title: {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    image: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    introduction: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    blogBody: {\r\n        type: String,\r\n        required: true\r\n    },\r\n\tcomments: [\r\n\t\t{\r\n\t\t\ttype: mongoose.Schema.Types.ObjectId,\r\n\t\t\tref: \"Comment\",\r\n\t\t},\r\n\t],\r\n    sendDate: {\r\n        type: Date,\r\n        default: new Date()\r\n    }\r\n});\r\n\r\nconst Blog = mongoose.model('Blog', BlogSchema);\r\nexport default Blog;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e473adb55b1b0307c26cc66d37f6752a5b6de1c1","contentHash":"aa0e8d343607a729d851c8a1a33d1e246d9ad43651d948344b05a02cd8622e69"},"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\fileUpload.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\fileUpload.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":46}},"2":{"start":{"line":8,"column":13},"end":{"line":8,"column":55}},"3":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"4":{"start":{"line":12,"column":19},"end":{"line":22,"column":1}},"5":{"start":{"line":13,"column":17},"end":{"line":13,"column":19}},"6":{"start":{"line":14,"column":2},"end":{"line":20,"column":5}},"7":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"8":{"start":{"line":16,"column":6},"end":{"line":16,"column":23}},"9":{"start":{"line":19,"column":4},"end":{"line":19,"column":25}},"10":{"start":{"line":21,"column":2},"end":{"line":21,"column":18}},"11":{"start":{"line":24,"column":0},"end":{"line":24,"column":32}},"12":{"start":{"line":25,"column":15},"end":{"line":25,"column":25}},"13":{"start":{"line":26,"column":0},"end":{"line":26,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":19},"end":{"line":12,"column":20}},"loc":{"start":{"line":12,"column":32},"end":{"line":22,"column":1}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":57},"end":{"line":14,"column":58}},"loc":{"start":{"line":14,"column":85},"end":{"line":20,"column":3}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},{"start":{"line":15,"column":4},"end":{"line":17,"column":5}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":1,"13":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,0],"1":[1,1],"2":[0,0]},"inputSourceMap":{"version":3,"sources":["fileUpload.js"],"names":["fileUpload","req","imageUrl","cloudinary","v2","uploader","upload","file","path","err","image","console","log","url"],"mappings":";;;;;;;AAAA;;;;AACO,MAAMA,UAAU,GAAG,MAAMC,GAAN,IAAc;AACpC,MAAIC,QAAQ,GAAG,EAAf;AACA,QAAMC,eAAWC,EAAX,CAAcC,QAAd,CAAuBC,MAAvB,CACFL,GAAG,CAACM,IAAJ,CAASC,IADP,EAEF,gBAAeC,GAAf,EAAoBC,KAApB,EAA2B;AACvB,QAAID,GAAJ,EAAS;AACLE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACH;;AACDP,IAAAA,QAAQ,GAAGQ,KAAK,CAACG,GAAjB;AACH,GAPC,CAAN;AAUA,SAAOX,QAAP;AACH,CAbM;;;eAeQF,U","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\","sourcesContent":["import cloudinary from \"./cloud\";\r\nexport const fileUpload = async(req) => {\r\n    let imageUrl = \"\";\r\n    await cloudinary.v2.uploader.upload(\r\n        req.file.path,\r\n        async function(err, image) {\r\n            if (err) {\r\n                console.log(err);\r\n            }\r\n            imageUrl = image.url;\r\n        }\r\n\r\n    );\r\n    return imageUrl;\r\n};\r\n\r\nexport default fileUpload"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d48f3d7f8d6ed30f662e388449956873945402a9","contentHash":"fb33609ec9b8a0235f7c2c3d57021e53b72b5f78074c9381afdb0ab2c7e03d52"},"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\cloud.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\cloud.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":18},"end":{"line":8,"column":63}},"3":{"start":{"line":10,"column":0},"end":{"line":10,"column":25}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":14,"column":0},"end":{"line":18,"column":3}},"6":{"start":{"line":20,"column":15},"end":{"line":20,"column":34}},"7":{"start":{"line":21,"column":0},"end":{"line":21,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["cloud.js"],"names":["cloudinary","config","cloud_name","process","env","CLOUDINARY_USER_NAME","api_key","CLOUDINARY_API_KEY","api_secret","CLOUDINARY_API_SECRET"],"mappings":";;;;;;;AAAA;;AACA;;;;AAGAA,oBAAWC,MAAX,CAAkB;AACdC,EAAAA,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,oBADV;AAEdC,EAAAA,OAAO,EAAEH,OAAO,CAACC,GAAR,CAAYG,kBAFP;AAGdC,EAAAA,UAAU,EAAEL,OAAO,CAACC,GAAR,CAAYK;AAHV,CAAlB;;eAMeT,mB","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\utils\\","sourcesContent":["import cloudinary from \"cloudinary\";\r\nimport \"dotenv/config\";\r\n\r\n\r\ncloudinary.config({\r\n    cloud_name: process.env.CLOUDINARY_USER_NAME,\r\n    api_key: process.env.CLOUDINARY_API_KEY,\r\n    api_secret: process.env.CLOUDINARY_API_SECRET,\r\n});\r\n\r\nexport default cloudinary;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a983e7c755fe744d15bdf6d6541c6976364016b9","contentHash":"1719dfe79a91c559851fbdc5b33d39af4497a49f8b53404b41a17cdfb55cdd5d"},"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\user.route.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\user.route.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":57}},"3":{"start":{"line":10,"column":12},"end":{"line":10,"column":53}},"4":{"start":{"line":12,"column":12},"end":{"line":12,"column":53}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":40}},"7":{"start":{"line":18,"column":0},"end":{"line":18,"column":82}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":85}},"9":{"start":{"line":21,"column":0},"end":{"line":21,"column":37}},"10":{"start":{"line":22,"column":0},"end":{"line":22,"column":35}},"11":{"start":{"line":23,"column":15},"end":{"line":23,"column":21}},"12":{"start":{"line":24,"column":0},"end":{"line":24,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["user.route.js"],"names":["router","express","Router","get","protect","getAllUsers","getUserById","post","signup","login"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAKA,MAAMA,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,MAAM,CAACG,GAAP,CAAW,GAAX,EAAgBC,aAAhB,EAAyB,sBAAW,OAAX,CAAzB,EAA8CC,iBAA9C;AACAL,MAAM,CAACG,GAAP,CAAW,MAAX,EAAmBC,aAAnB,EAA4B,sBAAW,OAAX,CAA5B,EAAiDE,iBAAjD,E,CAEA;;AAEAN,MAAM,CAACO,IAAP,CAAY,SAAZ,EAAuBC,YAAvB;AACAR,MAAM,CAACO,IAAP,CAAY,QAAZ,EAAsBE,WAAtB;eAGeT,M","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\","sourcesContent":["import express from \"express\";\r\nimport { getAllUsers,getUserById } from '../controllers/user.controller';\r\nimport { signup, login } from '../controllers/auth.controller';\r\nimport { protect } from '../controllers/auth.controller';\r\nimport { restrictTo } from '../controllers/auth.controller';\r\n\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get('/', protect, restrictTo('admin'), getAllUsers);\r\nrouter.get('/:id', protect, restrictTo('admin'), getUserById);\r\n\r\n// AUTH\r\n\r\nrouter.post('/signup', signup);\r\nrouter.post('/login', login);\r\n\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"735fc2a422e1f87a407c47dd058d3ee1212f072d","contentHash":"dda0721ce711c8e416476c08294c79c012e99c82b02bb4db97a9c598d9ea8d3f"},"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\user.controller.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\user.controller.js","statementMap":{"0":{"start":{"line":3,"column":12},"end":{"line":3,"column":75}},"1":{"start":{"line":5,"column":18},"end":{"line":5,"column":72}},"2":{"start":{"line":7,"column":39},"end":{"line":7,"column":93}},"3":{"start":{"line":9,"column":0},"end":{"line":19,"column":3}},"4":{"start":{"line":10,"column":16},"end":{"line":10,"column":42}},"5":{"start":{"line":12,"column":2},"end":{"line":18,"column":5}},"6":{"start":{"line":20,"column":0},"end":{"line":28,"column":3}},"7":{"start":{"line":21,"column":15},"end":{"line":21,"column":58}},"8":{"start":{"line":22,"column":2},"end":{"line":27,"column":5}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":31}},"loc":{"start":{"line":7,"column":37},"end":{"line":7,"column":95}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":47},"end":{"line":9,"column":48}},"loc":{"start":{"line":9,"column":73},"end":{"line":19,"column":1}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":47},"end":{"line":20,"column":48}},"loc":{"start":{"line":20,"column":73},"end":{"line":28,"column":1}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":46},"end":{"line":7,"column":92}},"type":"cond-expr","locations":[{"start":{"line":7,"column":70},"end":{"line":7,"column":73}},{"start":{"line":7,"column":76},"end":{"line":7,"column":92}}],"line":7},"1":{"loc":{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},"type":"binary-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":49}},{"start":{"line":7,"column":53},"end":{"line":7,"column":67}}],"line":7}},"s":{"0":1,"1":1,"2":2,"3":1,"4":0,"5":0,"6":1,"7":0,"8":0},"f":{"0":2,"1":0,"2":0},"b":{"0":[0,2],"1":[2,2]},"inputSourceMap":{"version":3,"sources":["user.controller.js"],"names":["exports","getAllUsers","req","res","next","users","User","find","status","json","results","length","data","getUserById","user","findById","params","id"],"mappings":";;AAAA;;AACA;;;;AAEAA,OAAO,CAACC,WAAR,GAAsB,yBAAW,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;AACvD,QAAMC,KAAK,GAAG,MAAMC,cAAKC,IAAL,EAApB,CADuD,CAGvD;;AACAJ,EAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,IAAAA,MAAM,EAAE,SADW;AAEnBE,IAAAA,OAAO,EAAEL,KAAK,CAACM,MAFI;AAGnBC,IAAAA,IAAI,EAAE;AACJP,MAAAA;AADI;AAHa,GAArB;AAOD,CAXmB,CAAtB;AAaAL,OAAO,CAACa,WAAR,GAAqB,yBAAW,OAAOX,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;AACxD,QAAMU,IAAI,GAAG,MAAMR,cAAKS,QAAL,CAAcb,GAAG,CAACc,MAAJ,CAAWC,EAAzB,CAAnB;AAEAd,EAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,IAAAA,MAAM,EAAE,SADW;AAEnBI,IAAAA,IAAI,EAAE;AACJE,MAAAA,IAAI,EAAEA;AADF;AAFa,GAArB;AAMD,CAToB,CAArB","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\","sourcesContent":["import User from '../database/model/user.model';\r\nimport catchAsync from '../utils/catchAsync'\r\n\r\nexports.getAllUsers = catchAsync(async (req, res, next) => {\r\n    const users = await User.find();\r\n  \r\n    // SEND RESPONSE\r\n    res.status(200).json({\r\n      status: 'success',\r\n      results: users.length,\r\n      data: {\r\n        users\r\n      }\r\n    });\r\n  });\r\n\r\nexports.getUserById= catchAsync(async (req, res, next) => {\r\n  const user = await User.findById(req.params.id);\r\n\r\n  res.status(200).json({\r\n    status: 'success',\r\n    data: {\r\n      user: user\r\n    }\r\n  });\r\n});\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"934c9210787385704a5cff5f25a7ecdd74bfa304","contentHash":"cfe477f0116f722a6a621a2f7f33680cdd8298d0f5ff868cdb5e000989455961"},"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\comments.route.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\comments.route.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":57}},"3":{"start":{"line":10,"column":16},"end":{"line":10,"column":61}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":14,"column":15},"end":{"line":14,"column":40}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":43}},"7":{"start":{"line":17,"column":0},"end":{"line":17,"column":42}},"8":{"start":{"line":18,"column":15},"end":{"line":18,"column":21}},"9":{"start":{"line":19,"column":0},"end":{"line":19,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["comments.route.js"],"names":["router","express","Router","post","saveComment","get","getAllComments"],"mappings":";;;;;;;AAAA;;AACA;;;;AAGA,MAAMA,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,MAAM,CAACG,IAAP,CAAY,MAAZ,EAAoBC,qBAApB;AACAJ,MAAM,CAACK,GAAP,CAAW,GAAX,EAAgBC,wBAAhB;eAEeN,M","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\","sourcesContent":["import express from 'express';\r\nimport { saveComment, getAllComments } from '../controllers/comments.controller'\r\n\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post('/:id', saveComment);\r\nrouter.get('/', getAllComments);\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f97a75a64548e59889ef7874dd6376ed34c50b1e","contentHash":"7657215620766f4b0b450b5a05d267c3565301f731cda65768fae9eedd82d649"},"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\comments.controller.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\comments.controller.js","statementMap":{"0":{"start":{"line":3,"column":12},"end":{"line":3,"column":75}},"1":{"start":{"line":5,"column":16},"end":{"line":5,"column":83}},"2":{"start":{"line":7,"column":18},"end":{"line":7,"column":72}},"3":{"start":{"line":9,"column":39},"end":{"line":9,"column":93}},"4":{"start":{"line":11,"column":0},"end":{"line":28,"column":2}},"5":{"start":{"line":12,"column":17},"end":{"line":12,"column":30}},"6":{"start":{"line":13,"column":21},"end":{"line":17,"column":4}},"7":{"start":{"line":18,"column":19},"end":{"line":18,"column":55}},"8":{"start":{"line":19,"column":2},"end":{"line":19,"column":37}},"9":{"start":{"line":20,"column":2},"end":{"line":27,"column":5}},"10":{"start":{"line":21,"column":4},"end":{"line":26,"column":7}},"11":{"start":{"line":30,"column":0},"end":{"line":39,"column":2}},"12":{"start":{"line":31,"column":19},"end":{"line":31,"column":49}},"13":{"start":{"line":32,"column":2},"end":{"line":38,"column":5}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":31}},"loc":{"start":{"line":9,"column":37},"end":{"line":9,"column":95}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":22},"end":{"line":11,"column":23}},"loc":{"start":{"line":11,"column":48},"end":{"line":28,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":22},"end":{"line":20,"column":23}},"loc":{"start":{"line":20,"column":39},"end":{"line":27,"column":3}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":25},"end":{"line":30,"column":26}},"loc":{"start":{"line":30,"column":45},"end":{"line":39,"column":1}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":92}},"type":"cond-expr","locations":[{"start":{"line":9,"column":70},"end":{"line":9,"column":73}},{"start":{"line":9,"column":76},"end":{"line":9,"column":92}}],"line":9},"1":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":67}},"type":"binary-expr","locations":[{"start":{"line":9,"column":46},"end":{"line":9,"column":49}},{"start":{"line":9,"column":53},"end":{"line":9,"column":67}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":3,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0},"f":{"0":3,"1":0,"2":0,"3":0},"b":{"0":[2,1],"1":[3,3]},"inputSourceMap":{"version":3,"sources":["comments.controller.js"],"names":["exports","saveComment","req","res","next","blogId","params","id","newComment","Comment","create","name","body","commentBody","blogPost","Blog","findById","comments","push","save","error","status","json","data","comment","getAllComments","find","results","length"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEAA,OAAO,CAACC,WAAR,GAAsB,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;AAG9C,QAAMC,MAAM,GAAGH,GAAG,CAACI,MAAJ,CAAWC,EAA1B;AACE,QAAMC,UAAU,GAAG,MAAMC,kBAAQC,MAAR,CAAe;AAEtCC,IAAAA,IAAI,EAAET,GAAG,CAACU,IAAJ,CAASD,IAFuB;AAGtCE,IAAAA,WAAW,EAAEX,GAAG,CAACU,IAAJ,CAASC,WAHgB;AAItCC,IAAAA,QAAQ,EAAET;AAJ4B,GAAf,CAAzB;AAQJ,QAAMS,QAAQ,GAAG,MAAMC,cAAKC,QAAL,CAAcX,MAAd,CAAvB;AACCS,EAAAA,QAAQ,CAACG,QAAT,CAAkBC,IAAlB,CAAuBV,UAAvB;AACA,QAAMM,QAAQ,CAACK,IAAT,CAAc,UAAUC,KAAV,EAAiB;AAElCjB,IAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,MAAAA,MAAM,EAAE,SADW;AAEnBE,MAAAA,IAAI,EAAE;AACJC,QAAAA,OAAO,EAAEhB;AADL;AAFa,KAArB;AAMD,GARI,CAAN;AASA,CAvBD;;AAyBAR,OAAO,CAACyB,cAAR,GAAyB,OAAOvB,GAAP,EAAYC,GAAZ,KAAoB;AACzC,QAAMc,QAAQ,GAAG,MAAMR,kBAAQiB,IAAR,EAAvB;AACAvB,EAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBD,IAAAA,MAAM,EAAE,SADS;AAEjBM,IAAAA,OAAO,EAAEV,QAAQ,CAACW,MAFD;AAGjBL,IAAAA,IAAI,EAAE;AACFN,MAAAA;AADE;AAHW,GAArB;AAOH,CATD","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\","sourcesContent":["import Blog from '../database/model/blog.model';\r\nimport Comment from '../database/model/comments.model';\r\nimport catchAsync from '../utils/catchAsync';\r\n\r\nexports.saveComment = async (req, res, next) => {\r\n\r\n\r\n  const blogId = req.params.id;\r\n    const newComment = await Comment.create({\r\n\r\n      name: req.body.name,\r\n      commentBody: req.body.commentBody,\r\n      blogPost: blogId,\r\n    });\r\n\r\n\r\nconst blogPost = await Blog.findById(blogId);\r\n\tblogPost.comments.push(newComment);\r\n\tawait blogPost.save(function (error) {\r\n\r\n    res.status(201).json({\r\n      status: 'success',\r\n      data: {\r\n        comment: newComment\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nexports.getAllComments = async (req, res) => {\r\n    const comments = await Comment.find();\r\n    res.status(200).json({\r\n        status: 'success',\r\n        results: comments.length, \r\n        data: {\r\n            comments\r\n        }\r\n    });\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b89784c4d76c81ecf06e1e87817ee469d7a037d8","contentHash":"1ffaa1f593e6990b5749d0462bb8c34df5dc77df2d61581a83ded17b64bed1e5"},"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\comments.model.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\comments.model.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":16},"end":{"line":8,"column":59}},"3":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"4":{"start":{"line":12,"column":22},"end":{"line":25,"column":2}},"5":{"start":{"line":27,"column":16},"end":{"line":27,"column":65}},"6":{"start":{"line":29,"column":15},"end":{"line":29,"column":22}},"7":{"start":{"line":30,"column":0},"end":{"line":30,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["comments.model.js"],"names":["CommentSchema","mongoose","Schema","name","type","String","required","commentBody","sendDate","Date","default","Comment","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,aAAa,GAAG,IAAIC,kBAASC,MAAb,CAAoB;AACtCC,EAAAA,IAAI,EAAE;AACFC,IAAAA,IAAI,EAAEC,MADJ;AAEFC,IAAAA,QAAQ,EAAE;AAFR,GADgC;AAKtCC,EAAAA,WAAW,EAAE;AACTH,IAAAA,IAAI,EAAEC,MADG;AAETC,IAAAA,QAAQ,EAAE;AAFD,GALyB;AAStCE,EAAAA,QAAQ,EAAE;AACNJ,IAAAA,IAAI,EAAEK,IADA;AAENC,IAAAA,OAAO,EAAE,IAAID,IAAJ;AAFH;AAT4B,CAApB,CAAtB;;AAeA,MAAME,OAAO,GAAGV,kBAASW,KAAT,CAAe,SAAf,EAA0BZ,aAA1B,CAAhB;;eACeW,O","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst CommentSchema = new mongoose.Schema({\r\n    name: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    commentBody: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    sendDate: {\r\n        type: Date,\r\n        default: new Date()\r\n    }\r\n});\r\n\r\nconst Comment = mongoose.model('Comment', CommentSchema);\r\nexport default Comment;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9de7ef8cdca511a9a0298e7d4095a5d6eb057d47","contentHash":"58d4a8bcbfb6ee4e9bb43211ff4434ddcd006400e7e7fb607d38037cbeb6342c"},"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\subcriber.route.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\subcriber.route.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":57}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":65}},"4":{"start":{"line":12,"column":12},"end":{"line":12,"column":53}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":40}},"7":{"start":{"line":18,"column":0},"end":{"line":18,"column":46}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":47}},"9":{"start":{"line":20,"column":0},"end":{"line":20,"column":50}},"10":{"start":{"line":21,"column":15},"end":{"line":21,"column":21}},"11":{"start":{"line":22,"column":0},"end":{"line":22,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["subcriber.route.js"],"names":["router","express","Router","post","subscribeToBlog","get","getAllSubscribers","delete","unsubscribeToBlog"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAIA,MAAMA,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,MAAM,CAACG,IAAP,CAAY,GAAZ,EAAkBC,2BAAlB;AACAJ,MAAM,CAACK,GAAP,CAAW,GAAX,EAAiBC,6BAAjB;AACAN,MAAM,CAACO,MAAP,CAAc,GAAd,EAAkBC,6BAAlB;eAEeR,M","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\routes\\","sourcesContent":["import express from 'express';\r\nimport { subscribeToBlog, getAllSubscribers, unsubscribeToBlog } from '../controllers/subscriber.controller';\r\nimport { protect } from '../controllers/auth.controller';\r\nimport { restrictTo } from '../controllers/auth.controller';\r\n\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post(\"/\",  subscribeToBlog);\r\nrouter.get(\"/\",  getAllSubscribers);\r\nrouter.delete(\"/\",unsubscribeToBlog);\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e47b394af72c1409c62e91c2551a518efd47bffa","contentHash":"d2eaf085763efc18b83054909e6b8e837b9e41b6919b0f4b295ad8d60a448ccd"},"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\subscriber.controller.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\subscriber.controller.js","statementMap":{"0":{"start":{"line":3,"column":19},"end":{"line":3,"column":89}},"1":{"start":{"line":5,"column":18},"end":{"line":5,"column":72}},"2":{"start":{"line":7,"column":39},"end":{"line":7,"column":93}},"3":{"start":{"line":9,"column":0},"end":{"line":36,"column":3}},"4":{"start":{"line":10,"column":19},"end":{"line":12,"column":4}},"5":{"start":{"line":14,"column":2},"end":{"line":27,"column":3}},"6":{"start":{"line":15,"column":26},"end":{"line":15,"column":69}},"7":{"start":{"line":16,"column":4},"end":{"line":21,"column":7}},"8":{"start":{"line":23,"column":4},"end":{"line":26,"column":7}},"9":{"start":{"line":29,"column":24},"end":{"line":29,"column":67}},"10":{"start":{"line":30,"column":2},"end":{"line":35,"column":5}},"11":{"start":{"line":38,"column":0},"end":{"line":45,"column":2}},"12":{"start":{"line":39,"column":22},"end":{"line":39,"column":55}},"13":{"start":{"line":40,"column":2},"end":{"line":44,"column":5}},"14":{"start":{"line":47,"column":0},"end":{"line":67,"column":2}},"15":{"start":{"line":48,"column":19},"end":{"line":50,"column":4}},"16":{"start":{"line":52,"column":2},"end":{"line":63,"column":3}},"17":{"start":{"line":53,"column":4},"end":{"line":53,"column":64}},"18":{"start":{"line":54,"column":4},"end":{"line":57,"column":7}},"19":{"start":{"line":59,"column":4},"end":{"line":62,"column":7}},"20":{"start":{"line":66,"column":2},"end":{"line":66,"column":7}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":31}},"loc":{"start":{"line":7,"column":37},"end":{"line":7,"column":95}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":51},"end":{"line":9,"column":52}},"loc":{"start":{"line":9,"column":77},"end":{"line":36,"column":1}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":38,"column":28},"end":{"line":38,"column":29}},"loc":{"start":{"line":38,"column":48},"end":{"line":45,"column":1}},"line":38},"3":{"name":"(anonymous_3)","decl":{"start":{"line":47,"column":28},"end":{"line":47,"column":29}},"loc":{"start":{"line":47,"column":54},"end":{"line":67,"column":1}},"line":47}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":46},"end":{"line":7,"column":92}},"type":"cond-expr","locations":[{"start":{"line":7,"column":70},"end":{"line":7,"column":73}},{"start":{"line":7,"column":76},"end":{"line":7,"column":92}}],"line":7},"1":{"loc":{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},"type":"binary-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":49}},{"start":{"line":7,"column":53},"end":{"line":7,"column":67}}],"line":7},"2":{"loc":{"start":{"line":14,"column":2},"end":{"line":27,"column":3}},"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":27,"column":3}},{"start":{"line":14,"column":2},"end":{"line":27,"column":3}}],"line":14},"3":{"loc":{"start":{"line":52,"column":2},"end":{"line":63,"column":3}},"type":"if","locations":[{"start":{"line":52,"column":2},"end":{"line":63,"column":3}},{"start":{"line":52,"column":2},"end":{"line":63,"column":3}}],"line":52}},"s":{"0":1,"1":1,"2":2,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"f":{"0":2,"1":0,"2":0,"3":0},"b":{"0":[1,1],"1":[2,2],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"sources":["subscriber.controller.js"],"names":["exports","subscribeToBlog","req","res","next","subscriber","Subscriber","findOne","email","body","newSubscriber","create","status","json","data","message","getAllSubscribers","subscribers","find","results","length","success","unsubscribeToBlog","findByIdAndDelete","id"],"mappings":";;AAAA;;AACA;;;;AAGAA,OAAO,CAACC,eAAR,GAA0B,yBAAW,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;AAE9D,MAAIC,UAAU,GAAG,MAAMC,qBAAWC,OAAX,CAAmB;AAACC,IAAAA,KAAK,EAAEN,GAAG,CAACO,IAAJ,CAASD;AAAjB,GAAnB,CAAvB;;AAEC,MAAI,CAACH,UAAL,EAAiB;AAChB,UAAMK,aAAa,GAAG,MAAMJ,qBAAWK,MAAX,CAAkBT,GAAG,CAACO,IAAtB,CAA5B;AACAN,IAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBD,MAAAA,MAAM,EAAE,SADY;AAGpBE,MAAAA,IAAI,EAAE;AACLT,QAAAA,UAAU,EAAEK;AADP;AAHc,KAArB;AAOD,GATA,MASM;AACN,WAAOP,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BD,MAAAA,MAAM,EAAE,SADmB;AAE3BG,MAAAA,OAAO,EAAE;AAFkB,KAArB,CAAP;AAIA;;AAEE,QAAML,aAAa,GAAG,MAAMJ,qBAAWK,MAAX,CAAkBT,GAAG,CAACO,IAAtB,CAA5B;AACAN,EAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBD,IAAAA,MAAM,EAAE,SADS;AAGjBE,IAAAA,IAAI,EAAE;AACFT,MAAAA,UAAU,EAAEK;AADV;AAHW,GAArB;AAOH,CA5ByB,CAA1B;;AA8BAV,OAAO,CAACgB,iBAAR,GAA4B,OAAOd,GAAP,EAAYC,GAAZ,KAAoB;AAC/C,QAAMc,WAAW,GAAG,MAAMX,qBAAWY,IAAX,EAA1B;AACAf,EAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBM,IAAAA,OAAO,EAACF,WAAW,CAACG,MADA;AAEpBC,IAAAA,OAAO,EAAE,IAFW;AAGpBP,IAAAA,IAAI,EAAEG;AAHc,GAArB;AAKA,CAPD;;AASAjB,OAAO,CAACsB,iBAAR,GAA4B,OAAOpB,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;AAGrD,MAAIC,UAAU,GAAG,MAAMC,qBAAWC,OAAX,CAAmB;AACzCC,IAAAA,KAAK,EAAEN,GAAG,CAACO,IAAJ,CAASD;AADyB,GAAnB,CAAvB;;AAGA,MAAIH,UAAJ,EAAgB;AACf,UAAMC,qBAAWiB,iBAAX,CAA6BlB,UAAU,CAACmB,EAAxC,CAAN;AACArB,IAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBQ,MAAAA,OAAO,EAAE,IADW;AAEpBN,MAAAA,OAAO,EAAE;AAFW,KAArB;AAIA,GAND,MAMO;AACP,WAAOZ,GAAG,CACRS,MADK,CACE,GADF,EAELC,IAFK,CAEA;AAAEQ,MAAAA,OAAO,EAAE,KAAX;AAAkBN,MAAAA,OAAO,EAAE;AAA3B,KAFA,CAAP;AAGA;;AAAA;AACAX,EAAAA,IAAD;AACC,CAlBD","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\controllers\\","sourcesContent":["import Subscriber from \"../database/model/subscribers.model\";\r\nimport catchAsync from '../utils/catchAsync';\r\n\r\n\r\nexports.subscribeToBlog = catchAsync(async (req, res, next) => {\r\n\r\n\tlet subscriber = await Subscriber.findOne({email: req.body.email});\r\n\r\n\t\tif (!subscriber) {\r\n\t\t\tconst newSubscriber = await Subscriber.create(req.body);\r\n\t\t\tres.status(201).json({\r\n\t\t\t\tstatus: 'success',\r\n\t\t\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsubscriber: newSubscriber\r\n\t\t\t\t}\r\n\t\t})\r\n\t} else {\r\n\t\treturn res.status(400).json({\r\n\t\t\tstatus: 'failed!',\r\n\t\t\tmessage: \"Sorry , you are already subscribed to Salim's blog site!!\",\r\n\t\t});\r\n\t}\r\n\r\n    const newSubscriber = await Subscriber.create(req.body);\r\n    res.status(201).json({\r\n        status: 'success',\r\n\r\n        data: {\r\n            subscriber: newSubscriber\r\n        }\r\n    })\r\n});\r\n\r\nexports.getAllSubscribers = async (req, res) => {\r\n\tconst subscribers = await Subscriber.find();\r\n\tres.status(200).json({\r\n\t\tresults:subscribers.length,\r\n\t\tsuccess: true, \r\n\t\tdata: subscribers, \r\n\t});\r\n};\r\n\r\nexports.unsubscribeToBlog = async (req, res, next) => {\r\n\r\n\r\n\tlet subscriber = await Subscriber.findOne({\r\n\t\temail: req.body.email,\r\n\t});\r\n\tif (subscriber) {\r\n\t\tawait Subscriber.findByIdAndDelete(subscriber.id);\r\n\t\tres.status(200).json({\r\n\t\t\tsuccess: true,\r\n\t\t\tmessage: \"Successfully unsubscribed from our salim's blogs\",\r\n\t\t});\r\n\t} else {\r\n\treturn res\r\n\t\t.status(404)\r\n\t\t.json({ success: false, message: \"It seems like you are not a subscriber in first place!\" });\r\n};\r\n(next);\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ce3452e8672ea5ebffacae81a5c1cc83440efc65","contentHash":"192c313897887b32e9ac9868749c9d6fb73733e6e6bd168fcf0e6ee48f6686a7"},"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\subscribers.model.js":{"path":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\subscribers.model.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":16},"end":{"line":8,"column":59}},"3":{"start":{"line":10,"column":17},"end":{"line":10,"column":61}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":14,"column":25},"end":{"line":26,"column":2}},"6":{"start":{"line":28,"column":19},"end":{"line":28,"column":74}},"7":{"start":{"line":30,"column":15},"end":{"line":30,"column":25}},"8":{"start":{"line":31,"column":0},"end":{"line":31,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":1,"6":1,"7":1,"8":1},"f":{"0":2},"b":{"0":[0,2],"1":[2,2]},"inputSourceMap":{"version":3,"sources":["subscribers.model.js"],"names":["SubscriberSchema","mongoose","Schema","email","type","String","required","lowercase","validate","validator","isEmail","unique","createdAt","Date","default","Subscriber","model"],"mappings":";;;;;;;AAAA;;AACA;;;;AAGA,MAAMA,gBAAgB,GAAGC,kBAASC,MAAT,CAAgB;AAEvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,oBAAP,CAFL;AAGLC,IAAAA,SAAS,EAAE,IAHN;AAILC,IAAAA,QAAQ,EAAE,CAACC,mBAAUC,OAAX,EAAoB,uBAApB,CAJL;AAKLC,IAAAA,MAAM,EAAE;AALH,GAFgC;AAYxCC,EAAAA,SAAS,EAAE;AACVR,IAAAA,IAAI,EAAES,IADI;AAEVC,IAAAA,OAAO,EAAE,IAAID,IAAJ;AAFC;AAZ6B,CAAhB,CAAzB;;AAkBA,MAAME,UAAU,GAAGd,kBAASe,KAAT,CAAe,YAAf,EAA6BhB,gBAA7B,CAAnB;;eACee,U","sourceRoot":"C:\\Users\\salim\\3D Objects\\backend\\src\\database\\model\\","sourcesContent":["import mongoose from \"mongoose\";\r\nimport validator from \"validator\";\r\n\r\n\r\nconst SubscriberSchema = mongoose.Schema({\r\n\r\n  email: {\r\n    type: String,\r\n    required: [true, 'Provide your email'],\r\n    lowercase: true,\r\n    validate: [validator.isEmail, 'Provide a valid email'],\r\n    unique: true\r\n\r\n  },\r\n    \r\n\r\n\tcreatedAt: {\r\n\t\ttype: Date,\r\n\t\tdefault: new Date(),\r\n\t},\r\n});\r\n\r\nconst Subscriber = mongoose.model(\"Subscriber\", SubscriberSchema);\r\nexport default Subscriber;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1e446ef68c59f20ae48ed647056ba3e78d502ee2","contentHash":"88916d06b34d2bf1af86cf0f4b27aa9fef07305d82b8c60930e5921e12fd2b54"}}